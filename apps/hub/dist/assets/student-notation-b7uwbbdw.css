:root{--c-bg: #1f1f1f;--c-surface: #ffffff;--c-surface-muted: #f1f3f5;--c-surface-overlay: rgba(255, 255, 255, .88);--c-text: #212529;--c-text-muted: #6c757d;--c-border: #dfe3e6;--c-border-strong: #c3c9d0;--c-gridline: #e9ecef;--c-danger: #dc3545;--c-warning: #ffc107;--c-accent: #4a90e2;--c-accent-hover: var(--c-accent-neutral-hover, #ffb300);--c-accent-light: #63a9fd;--c-accent-rgb: 74, 144, 226;--c-accent-general: #ffc107;--c-anacrusis-border: #cfd6de;--c-anacrusis-bg: rgba(207, 214, 222, .32);--c-anacrusis-accent: #aab4c2;--c-accent-neutral: #ffc107;--c-accent-neutral-light: #ffd54f;--c-accent-neutral-hover: #ffb300;--c-accent-neutral-rgb: 255, 193, 7;--space-0: 0rem;--space-005: .05rem;--space-010: .1rem;--space-015: .15rem;--space-020: .2rem;--space-025: .25rem;--space-030: .3rem;--space-035: .35rem;--space-040: .4rem;--space-045: .45rem;--space-050: .5rem;--space-055: .55rem;--space-060: .6rem;--space-065: .65rem;--space-070: .7rem;--space-075: .75rem;--space-080: .8rem;--space-085: .85rem;--space-090: .9rem;--space-095: .95rem;--space-100: 1rem;--space-150: 1.5rem;--space-200: 2rem;--space-1: .125rem;--space-2: .25rem;--space-3: .375rem;--space-4: .5rem;--space-5: .75rem;--app-padding: var(--space-025);--note-size: 1rem;--note-margin: var(--space-1);--toolbar-block-min: 140px;--toolbar-block-ideal: 20dvh;--toolbar-block-max: 300px;--toolbar-block-size: clamp(var(--toolbar-block-min), var(--toolbar-block-ideal), var(--toolbar-block-max));--toolbar-padding: clamp(var(--space-010), 1dvh, var(--space-025));--preset-tab-rail-height: 28px;--slider-thumb-size: 20px;--slider-thumb-border: 2px;--slider-thumb-total: calc(var(--slider-thumb-size) + (var(--slider-thumb-border) * 2));--slider-track-thickness: calc(var(--slider-thumb-size) / 2);--border-radius-sm: 3px;--border-radius-md: 6px;--box-shadow-sm: 0 1px 2px rgba(15, 23, 42, .06);--box-shadow-md: 0 3px 6px rgba(15, 23, 42, .12);--main-font: "Atkinson Hyperlegible", Arial, sans-serif;--font-size-sm: .875rem;--font-size-base: 1rem;--font-size-lg: 1.125rem}@font-face{font-family:Atkinson Hyperlegible;src:url(/music-learning-tools/assets/atkinsonHyperlegibleNextRegular-DOJsAlq1.otf) format("opentype");font-weight:400;font-style:normal}*,*:before,*:after{box-sizing:border-box}html,body{margin:0;padding:0;height:100%;width:100%;overflow-x:hidden;overflow-y:hidden;font-family:var(--main-font);background-color:var(--c-bg);color:var(--c-text);display:flex}button{background-color:var(--c-accent);color:var(--c-surface);border:none;border-radius:var(--border-radius-md);padding:var(--space-025) var(--space-050);font-family:var(--main-font);font-size:14px;cursor:pointer;transition:background-color .2s ease,opacity .2s ease}button:hover,button:focus{background-color:var(--c-accent-hover);outline:none}button:disabled{background-color:var(--c-border);opacity:.7;cursor:not-allowed}*{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}*::selection{background:transparent}*::-moz-selection{background:transparent}:root{font-size:100%}body{font-size:var(--font-size-base)}button{font-size:var(--font-size-sm)}.slider-label{font-size:var(--font-size-base)}.tempo-input{font-size:var(--font-size-sm)}.app-title{font-size:var(--font-size-base)}.tonic-sign-button{font-size:var(--font-size-lg)}#app-loading-screen{position:fixed;top:0;left:0;width:100vw;height:100dvh;background:linear-gradient(135deg,#1a1a2e,#16213e,#0f3460);display:flex;align-items:center;justify-content:center;z-index:99999;opacity:1;transition:opacity .6s cubic-bezier(.4,0,.2,1)}#app-loading-screen.fade-out{opacity:0;pointer-events:none}.loading-container{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:2rem;max-width:400px}.loading-logo{width:120px;height:120px;margin-bottom:2rem;animation:float 3s ease-in-out infinite}@keyframes float{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}.logo-svg{width:100%;height:100%;filter:drop-shadow(0 0 20px rgba(168,140,243,.4))}.logo-circle{fill:none;stroke:#a88cf3;stroke-width:2;stroke-dasharray:283;stroke-dashoffset:283;animation:drawCircle 2s ease-in-out forwards,pulse 2s ease-in-out 2s infinite;transform-origin:center}.logo-path{fill:none;stroke:#4a90e2;stroke-width:3;stroke-linecap:round;stroke-dasharray:100;stroke-dashoffset:100;animation:drawPath 1.5s ease-in-out .5s forwards}@keyframes drawCircle{to{stroke-dashoffset:0}}@keyframes drawPath{to{stroke-dashoffset:0}}@keyframes pulse{0%,to{opacity:1;stroke-width:2}50%{opacity:.6;stroke-width:2.5}}.loading-title{font-family:Atkinson Hyperlegible,-apple-system,BlinkMacSystemFont,Segoe UI,sans-serif;font-size:2rem;font-weight:400;color:#fff;margin:0 0 2.5rem;letter-spacing:.5px;opacity:0;animation:fadeInUp .8s ease-out .3s forwards}@keyframes fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.loading-progress-container{width:100%;margin-bottom:1.5rem;opacity:0;animation:fadeInUp .8s ease-out .6s forwards}.loading-progress-bar{width:100%;height:4px;background-color:#ffffff1a;border-radius:2px;overflow:hidden;margin-bottom:.75rem;box-shadow:inset 0 1px 3px #0000004d}.loading-progress-fill{height:100%;width:0%;background:linear-gradient(90deg,#4a90e2,#a88cf3);border-radius:2px;transition:width .3s cubic-bezier(.4,0,.2,1);box-shadow:0 0 10px #4a90e280;position:relative;overflow:hidden}.loading-progress-fill:after{content:"";position:absolute;inset:0;background:linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent);animation:shimmer 2s infinite}@keyframes shimmer{0%{transform:translate(-100%)}to{transform:translate(100%)}}.loading-progress-text{font-family:Atkinson Hyperlegible,monospace;font-size:.875rem;color:#ffffffb3;letter-spacing:1px}.loading-status{font-family:Atkinson Hyperlegible,-apple-system,BlinkMacSystemFont,Segoe UI,sans-serif;font-size:.875rem;color:#fff9;opacity:0;animation:fadeInUp .8s ease-out .9s forwards;min-height:1.5rem;transition:color .3s ease}#app-loading-screen.error .loading-status{color:#f44;font-weight:500}#app-loading-screen.error .loading-progress-fill{background:linear-gradient(90deg,#f44,#c00);box-shadow:0 0 10px #ff444480}@media(max-width:768px){.loading-container{max-width:300px}.loading-logo{width:90px;height:90px}.loading-title{font-size:1.5rem}}@media(prefers-reduced-motion:reduce){#app-loading-screen,.loading-logo,.logo-circle,.logo-path,.loading-title,.loading-progress-container,.loading-status,.loading-progress-fill{animation:none!important;transition:none!important}.loading-title,.loading-progress-container,.loading-status{opacity:1}.logo-circle,.logo-path{stroke-dashoffset:0}}#app-container{display:flex;flex-direction:column;flex:1;min-height:0;width:100%;max-width:100%;overflow-x:hidden}#canvas-container{display:flex;flex-direction:column;flex:1 1 auto;min-height:0;width:100%;max-width:100%;min-width:0;overflow-x:hidden;padding:var(--space-2);padding-top:0;padding-bottom:0;position:relative;z-index:1;background-color:transparent;box-sizing:border-box}#canvas-content{display:flex;flex-direction:column;flex:1;width:100%;min-width:0;overflow-x:hidden;min-height:0}#toolbar{height:var(--toolbar-block-size);max-height:var(--toolbar-block-size);min-height:0;width:100%;display:flex;flex-direction:row;align-items:stretch;padding:var(--toolbar-padding);padding-bottom:0;border:none;background-color:transparent;box-shadow:none;flex-shrink:0;margin-bottom:0;position:relative;z-index:2;overflow-x:auto;overflow-y:hidden}#toolbar:has(.draw-content-box){overflow:visible}#toolbar-primary,#toolbar-secondary{display:flex;border:1px solid var(--c-border);border-radius:var(--border-radius-md);background-color:var(--c-surface)}#toolbar .toolkit-button{padding:clamp(var(--space-015),.9dvh,var(--space-025));font-size:clamp(.7rem,1.4dvh,var(--font-size-sm))}#toolbar-primary{flex:0 0 auto;padding:var(--toolbar-padding);height:100%;max-height:100%;min-height:0;overflow:hidden;display:flex}#toolbar-primary:has(#volume-popup.visible){overflow:visible}#toolbar:has(#volume-popup.visible){overflow-x:visible;overflow-y:visible}.primary-toolbar-grid-5x5{--toolbar-note-stroke: clamp(2px, .55dvh, 4px);display:grid;grid-template-columns:repeat(5,minmax(0,1fr));grid-template-rows:repeat(5,minmax(0,1fr));gap:clamp(var(--space-010),.75dvh,var(--space-025));height:100%;width:100%}.primary-toolbar-grid-5x5>*{width:100%;height:100%;min-width:0;min-height:0}.primary-toolbar-grid-5x5>.toolkit-icon-button{aspect-ratio:1 / 1}.primary-toolbar-grid-5x5>.toolkit-icon-button img{width:100%;height:100%}.primary-toolbar-grid-5x5 #volume-control-wrapper{display:flex;align-items:center;justify-content:center;position:relative}.primary-toolbar-grid-5x5 .note{display:flex;align-items:center;justify-content:center;justify-self:center;align-self:center;cursor:pointer;transition:transform .15s ease,box-shadow .15s ease;box-sizing:border-box;max-width:100%;max-height:100%}.primary-toolbar-grid-5x5 .note[data-color="#4a90e2"]{--note-color: #4a90e2}.primary-toolbar-grid-5x5 .note[data-color="#2d2d2d"]{--note-color: #2d2d2d}.primary-toolbar-grid-5x5 .note[data-color="#d66573"]{--note-color: #d66573}.primary-toolbar-grid-5x5 .note[data-color="#68a03f"]{--note-color: #68a03f}.primary-toolbar-grid-5x5 .circle-note{aspect-ratio:1 / 1;height:80%;width:auto;border-radius:50%;border:var(--toolbar-note-stroke) solid var(--note-color);background-color:transparent}.primary-toolbar-grid-5x5 .oval-note{aspect-ratio:.7 / 1;height:80%;width:auto;border-radius:50%;border:var(--toolbar-note-stroke) solid var(--note-color);background-color:transparent}.primary-toolbar-grid-5x5 .diamond-note{aspect-ratio:1 / 1;height:80%;width:auto;border:none;border-radius:0;background:none}.primary-toolbar-grid-5x5 .diamond-note .diamond-icon{width:100%;height:100%;fill:none;stroke:var(--note-color);stroke-width:calc(var(--toolbar-note-stroke) * 2)}.primary-toolbar-grid-5x5 .note:hover{transform:scale(1.05)}.primary-toolbar-grid-5x5 .note.selected{background-color:var(--note-color);box-shadow:0 0 0 2px var(--c-surface),0 0 0 4px var(--note-color)}.primary-toolbar-grid-5x5 .diamond-note.selected .diamond-icon{fill:var(--note-color)}#lasso-shortcut-button,#marker-shortcut-button{border:1px solid var(--c-border)}#lasso-shortcut-button svg,#marker-shortcut-button svg{width:60%;height:60%}#toolbar-secondary{flex:0 0 auto;height:100%;max-height:100%;min-height:0;overflow:hidden;display:flex;width:fit-content;background-color:transparent;border:none}.tab-sidebar{flex:0 0 fit-content;display:grid;grid-template-rows:minmax(var(--preset-tab-rail-height),1fr) repeat(3,1fr);grid-auto-rows:1fr;align-items:stretch;justify-items:stretch;background-color:transparent;border-right:1px solid var(--c-border-strong);padding-top:0;height:100%;min-height:0}.tab-sidebar:before{content:"";grid-row:1;background-color:transparent}.tab-sidebar .tab-button{height:100%;width:100%;display:flex;align-items:center}.tab-content{flex:1 1 auto;padding:0;background-color:transparent;overflow-x:auto;overflow-y:auto;min-width:0;min-height:0;max-height:100%;height:100%}.tab-content:has(.dropdown-container.open){overflow:visible}.tab-content.dropdown-open{overflow:visible}#toolbar-secondary:has(.dropdown-container.open){overflow:visible}#toolbar-secondary.dropdown-open{overflow:visible}#toolbar-secondary:has(.draw-content-box){overflow:visible}#toolbar-secondary:has(.draw-content-box) .tab-content{overflow:visible}.tab-panel{display:none;height:100%;align-items:stretch}.tab-panel.active{display:flex;flex-direction:row;gap:0;width:fit-content!important;min-height:0;height:100%}.control-section{flex:0 1 auto;padding:0;background-color:transparent;border-right:none;display:flex;flex-direction:column;min-width:fit-content;width:fit-content;border-radius:0;min-height:0;max-height:100%;gap:0}.preset-effects-container{align-items:flex-start;justify-content:flex-start;width:fit-content;max-height:100%;height:100%;overflow:hidden}.control-section h4{margin:0;color:var(--c-text-muted);font-size:.9em;text-transform:uppercase;letter-spacing:.5px;flex-shrink:0;width:100%;text-align:center}.rhythm-structure-container{display:flex;flex-direction:column;gap:clamp(.5rem,1dvh,var(--space-3));background-color:var(--c-surface);border:1px solid var(--c-border);border-radius:var(--border-radius-md);box-shadow:var(--box-shadow-sm);padding:var(--space-015);flex:1 1 0;min-height:0;max-height:100%;height:100%;justify-content:space-between;overflow:hidden}.control-subsection{display:flex;flex-direction:column;flex:1 1 0;min-height:0}.control-subsection h4{margin:0;color:var(--c-text-muted);font-size:.9em;text-transform:uppercase;letter-spacing:.5px;flex-shrink:0;width:100%}.macrobeat-adjust-group{display:flex;gap:var(--space-2);justify-content:stretch;flex:1 1 0;min-height:0;align-items:stretch}.macrobeat-adjust-group .toolkit-button{flex:1;min-height:0;height:100%}.toggle-button-group{display:flex;gap:var(--space-2);justify-content:center}.rhythm-structure-container .toggle-button-group{flex:1 1 0;min-height:0;align-items:stretch}.rhythm-structure-container .toggle-button-group .sidebar-toggle-button{min-height:0;height:100%}.modulation-container{display:flex;flex-direction:column;background-color:var(--c-surface);border:1px solid var(--c-border);border-radius:var(--border-radius-md);box-shadow:var(--box-shadow-sm);padding:var(--space-015);flex:1 1 0;min-height:0;height:100%;overflow:hidden}.modulation-controls{display:flex;flex-direction:column;gap:var(--space-2);align-items:stretch;height:100%;min-height:0;justify-content:space-evenly}.rhythm-controls-container{flex:0 1 auto;display:flex;flex-direction:column;align-items:stretch;justify-content:flex-start;min-height:0;height:100%;gap:0}.rhythm-controls-section{flex:1;display:flex;flex-direction:column;align-items:stretch;justify-content:flex-start;min-height:0;height:100%;gap:0;width:100%}.rhythm-controls-tab-button{cursor:default!important;pointer-events:none;border-bottom:none!important;border-bottom-left-radius:0!important;border-bottom-right-radius:0!important;width:100%;flex-shrink:0}.rhythm-controls-tab-button{display:none}.rhythm-controls-tab-button:disabled{opacity:1;background-color:var(--c-surface);color:var(--c-text);font-weight:600;border-color:var(--c-border)}.rhythm-controls-content-box{background-color:var(--c-surface);border:1px solid var(--c-border);border-radius:var(--border-radius-md);padding:var(--space-2);box-shadow:var(--box-shadow-sm);position:relative;z-index:1;width:100%;max-width:100%;min-width:fit-content;box-sizing:border-box;display:flex;flex-direction:row;align-items:stretch;justify-content:flex-start;gap:var(--space-2);margin-top:0;min-height:0;flex:1;overflow:hidden}.rhythm-stamp-tabs-container{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;width:100%;max-width:100%;min-width:fit-content;gap:0;box-sizing:border-box;min-height:0;max-height:100%}.rhythm-stamp-tabs-controls{flex:1;display:grid;grid-template-rows:auto minmax(0,1fr);height:100%;min-width:0;min-height:0;max-height:100%;overflow:visible}.rhythm-stamp-tabs-controls .rhythm-stamp-tab-content,.rhythm-stamp-tabs-controls .rhythm-stamp-tab-panel,.rhythm-stamp-tabs-controls .sixteenth-stamps-toolbar-container{overflow:visible}.rhythm-tab-stamps{display:flex;gap:0;margin-bottom:calc(-1 * var(--space-005));position:relative;z-index:1}.rhythm-stamp-tab-content{position:relative;width:100%;flex:1;min-height:0;display:flex;flex-direction:column;height:100%}.rhythm-stamp-tab-panel{display:none;padding:0}.rhythm-stamp-tab-panel.active{display:flex;flex-direction:row;flex:1 1 0;min-height:0;height:100%;max-height:100%;gap:clamp(var(--space-05),1dvh,var(--space-1))}.sixteenth-stamps-toolbar-container{display:flex;justify-content:center;align-items:stretch;padding:var(--space-1) var(--space-2);flex:1;height:100%;min-height:0;overflow:hidden;box-sizing:border-box;background-color:var(--c-surface);border:1px solid var(--c-border);border-radius:var(--border-radius-md);box-shadow:var(--box-shadow-sm)}.sixteenth-stamps-grid{display:grid;grid-template-rows:repeat(3,minmax(0,1fr));flex:1;height:100%;gap:var(--space-1);align-items:stretch}.sixteenth-stamps-row{display:grid;gap:var(--space-1);justify-items:center;align-content:center;align-items:center;padding:var(--space-05) var(--space-2);box-sizing:border-box}.sixteenth-stamps-row-1{grid-template-columns:repeat(4,1fr)}.sixteenth-stamps-row-2{grid-template-columns:repeat(6,1fr)}.sixteenth-stamps-row-3{grid-template-columns:repeat(5,1fr)}.sixteenth-stamps-row .sixteenth-stamp-button{height:100%;width:auto;max-width:100%;max-height:100%;aspect-ratio:1 / 1;justify-self:center;align-self:center}.sixteenth-stamps-row .sixteenth-stamp-button svg{width:100%;height:100%;display:block}.triplet-stamps-toolbar-container{display:flex;justify-content:center;align-items:stretch;padding:var(--space-1) var(--space-2);flex:1;height:100%;min-height:0;overflow:hidden;box-sizing:border-box;background-color:var(--c-surface);border:1px solid var(--c-border);border-radius:var(--border-radius-md);box-shadow:var(--box-shadow-sm)}.triplet-stamps-grid{display:grid;grid-template-rows:repeat(3,minmax(0,1fr));align-items:stretch;flex:1;height:100%;gap:var(--space-1)}.triplet-stamps-row{display:grid;grid-auto-flow:column;grid-auto-columns:minmax(0,1fr);justify-content:stretch;justify-items:center;align-items:center;gap:var(--space-1);padding:var(--space-05) var(--space-2);box-sizing:border-box}.triplet-stamps-eighth-row{margin-bottom:0}.triplet-stamps-quarter-row{margin-top:0}.triplet-stamps-quarter-row:first-of-type{margin-top:0}.triplet-stamps-row .triplet-stamp-button{height:100%;width:auto;max-width:100%;max-height:100%;aspect-ratio:1 / 1;justify-self:center;align-self:center}.triplet-stamps-row .triplet-stamp-button-wide{aspect-ratio:2 / 1;grid-column:span 2}.triplet-stamps-row .triplet-stamp-button svg{width:100%;height:100%;display:block}#button-grid{position:relative;display:flex;flex-direction:row;align-items:stretch;pointer-events:none;z-index:2;flex:0 0 auto;width:100%}#button-grid>*{pointer-events:auto}.button-grid-left-cell{display:flex;flex-direction:column;align-items:stretch;justify-content:stretch;flex:0 0 auto;padding:0;background-color:var(--c-surface);border-right:2px solid var(--c-border-strong);border-bottom:2px solid var(--c-border-strong);border-top:none;border-left:none;gap:0;min-height:0}.left-cell-grid{flex:1 1 0;display:grid;grid-template-columns:repeat(2,minmax(0,1fr));grid-auto-rows:minmax(0,1fr);gap:var(--space-2);align-items:stretch;justify-items:stretch;padding:var(--space-2);min-height:0;width:100%}.button-grid-middle-cell{display:flex;flex-direction:column;align-items:stretch;justify-content:flex-start;flex:0 0 auto;min-width:0;width:auto;padding:0;background-color:var(--c-surface);border-right:2px solid var(--c-border-strong);border-bottom:2px solid var(--c-border-strong);border-top:none;border-left:none;box-sizing:border-box}.button-grid-right-cell{display:flex;align-items:center;justify-content:center;flex:0 0 auto;background-color:transparent;border-bottom:2px solid var(--c-border-strong);border-top:none;border-right:none;border-left:none}#grids-wrapper{display:flex;flex-direction:column;flex:1;min-height:0;background-color:transparent;overflow-x:auto;overflow-y:hidden;position:relative;scrollbar-width:none;-ms-overflow-style:none}#grids-wrapper::-webkit-scrollbar{display:none}#drum-grid-wrapper{display:flex;flex-direction:row;align-items:stretch;gap:0;flex:0 0 auto;width:fit-content;min-width:fit-content;min-height:90px;overflow-x:visible;overflow-y:hidden;position:relative;background-color:transparent;border-radius:0 0 var(--border-radius-md) var(--border-radius-md);border-top:2px solid var(--c-border-strong)}#drum-grid-wrapper>*{pointer-events:auto}.drum-grid-left-cell,.drum-grid-middle-cell,.drum-grid-right-cell{display:flex;align-items:stretch;justify-content:stretch;flex:0 0 auto;padding:0;gap:0;min-height:0;box-sizing:border-box}.drum-grid-left-cell{background-color:var(--c-bg);border-right:2px solid var(--c-border-strong);border-bottom:2px solid var(--c-border-strong);position:relative;align-items:stretch}.drum-grid-middle-cell{background-color:var(--c-surface);position:relative;flex:0 0 auto;min-width:0;border-right:2px solid var(--c-border-strong);border-bottom:2px solid var(--c-border-strong)}.drum-grid-right-cell{background-color:transparent;border-bottom:2px solid var(--c-border-strong)}#drum-canvas-wrapper{position:relative;width:100%;height:100%}.drum-volume-control{position:absolute;top:50%;left:100%;transform:translateY(-50%);display:flex;flex-direction:column;align-items:center;gap:var(--space-2);padding:var(--space-025) var(--space-035);min-width:140px;border:1px solid var(--c-border);border-radius:var(--border-radius-md);background-color:var(--c-surface);box-shadow:var(--box-shadow-sm);z-index:1001;visibility:hidden;opacity:0;pointer-events:none;transition:opacity .2s ease,visibility .2s ease}.drum-volume-control.visible{visibility:visible;opacity:1;pointer-events:auto}.drum-volume-slider{width:120px}.drum-left-content{display:grid;grid-template-columns:3fr 1fr;grid-template-rows:repeat(3,1fr);align-items:center;justify-items:center;width:100%;height:100%;padding:var(--space-2);box-sizing:border-box;gap:var(--space-1)}.drum-volume-button{display:inline-flex;align-items:center;justify-content:center;width:100%;height:100%;border:1px solid var(--c-border);border-radius:var(--border-radius-sm);background:var(--c-surface);color:var(--c-text);cursor:pointer;transition:background-color .15s ease,border-color .15s ease}.drum-volume-button:hover{background:var(--c-surface-muted);border-color:var(--c-border-strong)}.drum-volume-icon svg{width:24px;height:24px}.drum-track-label{font-family:Atkinson Hyperlegible,sans-serif;font-size:.9rem;color:var(--c-text-muted);font-weight:700}#grid-scrollbar-proxy{position:sticky;left:0;flex:0 0 auto;width:100%;min-height:20px;margin:var(--space-1) 0;overflow-x:auto;overflow-y:hidden;border-top:2px solid var(--c-border-strong);border-bottom:2px solid var(--c-border-strong);background-color:var(--c-surface-overlay);border-radius:var(--border-radius-sm);box-shadow:inset 0 1px 2px #0000001a;scrollbar-color:var(--c-accent) transparent;z-index:10}#grid-scrollbar-proxy:focus-visible{outline:2px solid var(--c-accent);outline-offset:2px}#grid-scrollbar-proxy::-webkit-scrollbar{height:12px}#grid-scrollbar-proxy::-webkit-scrollbar-track{background:transparent}#grid-scrollbar-proxy::-webkit-scrollbar-thumb{background-color:var(--c-accent);border-radius:999px;border:3px solid transparent;background-clip:padding-box}.grid-scrollbar-inner{display:block;width:100%;min-height:1px;pointer-events:none}.accidental-buttons-container{display:flex;flex-direction:column;align-items:center;justify-content:space-evenly;gap:var(--space-2);height:100%;width:100%}#beat-line-button-layer{position:relative;width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-evenly;flex:1 1 auto;min-width:0;pointer-events:none}.beat-line-row{position:relative;width:100%;flex:1 1 auto;min-height:0;pointer-events:none;display:flex;align-items:center}#time-signature-row,#grouping-buttons-row{flex:1 1 0}#time-signature-row{pointer-events:auto}#grouping-buttons-row{pointer-events:auto;border-top:2px solid var(--buttonGrid-boundary-color, #3a3a3a)}#boundary-buttons-row{flex:1 1 0;align-items:center;min-height:0;position:relative;pointer-events:auto}#beat-line-button-layer .time-signature-label{position:absolute;top:0;bottom:0;display:flex;align-items:center;justify-content:center;text-align:center;padding:var(--space-010) var(--space-040);border:1px solid var(--c-border);border-radius:var(--border-radius-sm);background-color:var(--c-surface-overlay);color:var(--c-text-muted);font-size:.75rem;font-weight:600;letter-spacing:.05em;box-shadow:var(--box-shadow-sm)}#beat-line-button-layer .time-signature-label.anacrusis{border-color:var(--c-anacrusis-border);color:var(--c-anacrusis-accent);background-color:var(--c-anacrusis-bg)}#pitch-grid-wrapper{width:fit-content;min-width:fit-content;display:flex;flex-direction:column;flex:1;min-height:200px;overflow-x:visible;overflow-y:hidden;position:relative}#pitch-grid-container{flex:1;position:relative;width:fit-content;overflow-x:visible;overflow-y:hidden;min-height:0;background-color:var(--c-surface)}#pitch-canvas-wrapper{position:relative;width:100%;height:100%}#notation-grid,#playhead-canvas,#hover-canvas,#legend-left-canvas,#legend-right-canvas{position:absolute;top:0;left:0;display:block}#playhead-canvas,#hover-canvas,#drum-hover-canvas{pointer-events:none;cursor:crosshair}#legend-left-canvas{left:0;pointer-events:none;z-index:10}#legend-right-canvas{left:auto;right:0;pointer-events:none;z-index:10}#drum-grid,#drum-playhead-canvas,#drum-hover-canvas{display:block;position:absolute;top:0;left:0}#drum-playhead-canvas,#drum-hover-canvas{pointer-events:none}#sidebar{position:fixed;top:0;left:0;width:250px;height:100%;background-color:var(--c-surface-overlay);border-right:1px solid var(--c-border-strong);box-shadow:var(--box-shadow-md);padding:var(--space-035);display:flex;flex-direction:column;gap:var(--space-035);z-index:2000;transform:translate(-100%);transition:transform .3s ease-in-out;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);overflow:hidden}body.sidebar-open #sidebar{transform:translate(0)}.sidebar-container{border:1px solid var(--c-border);border-radius:var(--border-radius-md);padding:var(--space-025);background-color:var(--c-surface)}.sidebar-container .app-title{text-align:center;font-weight:700;line-height:1.2;color:var(--c-text-muted)}.sidebar-button{display:flex;align-items:center;gap:var(--space-025);width:100%;padding:var(--space-025);text-align:left;margin-bottom:var(--space-025)}.sidebar-button:last-child{margin-bottom:0}.sidebar-button img{width:20px;height:20px;flex-shrink:0}.sidebar-legend-toggle-row{display:flex;gap:var(--space-025)}.sidebar-legend-toggle-row .sidebar-toggle-button{flex:1 1 0;width:auto;white-space:normal}#sidebar-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#0006;z-index:1999;opacity:0;visibility:hidden;transition:opacity .3s ease-in-out,visibility .3s ease-in-out}body.sidebar-open #sidebar-overlay{opacity:1;visibility:visible}#volume-control-wrapper{position:relative}#volume-popup{position:absolute;top:50%;left:100%;transform:translateY(-50%);background-color:var(--c-surface);border:1px solid var(--c-border);border-radius:var(--border-radius-md);padding:var(--space-025) var(--space-035);margin-left:var(--space-025);box-shadow:var(--box-shadow-sm);z-index:1001;visibility:hidden;opacity:0;transition:opacity .2s,visibility .2s}#volume-popup.visible{visibility:visible;opacity:1}input[type=range][orient=vertical]{appearance:none;-webkit-appearance:none;writing-mode:initial;direction:initial;width:120px;height:8px;padding:5px 0}.sidebar-viz-controls{display:flex;flex-direction:column;gap:var(--space-035)}.sidebar-control-group{display:flex;flex-direction:column;gap:var(--space-015)}.sidebar-control-group label{font-size:.85rem;font-weight:500;color:var(--c-text-muted);margin-bottom:var(--space-015)}.sidebar-range-input{width:100%;height:6px;background:var(--c-gridline);border-radius:3px;appearance:none;outline:none;transition:background .2s ease}.sidebar-range-input::-webkit-slider-thumb{appearance:none;width:16px;height:16px;background:var(--c-accent);border-radius:50%;cursor:pointer;border:2px solid var(--c-surface);box-shadow:0 2px 4px #0003;transition:all .2s ease}.sidebar-range-input::-webkit-slider-thumb:hover{transform:scale(1.1);box-shadow:0 2px 6px #0000004d}.sidebar-range-input::-moz-range-thumb{width:16px;height:16px;background:var(--c-accent);border-radius:50%;cursor:pointer;border:2px solid var(--c-surface);box-shadow:0 2px 4px #0003;transition:all .2s ease}.sidebar-range-input::-moz-range-thumb:hover{transform:scale(1.1);box-shadow:0 2px 6px #0000004d}.sidebar-value-display{font-size:.8rem;font-weight:600;color:var(--c-accent);text-align:center;min-height:1.2em;display:flex;align-items:center;justify-content:center}.sidebar-toggle-button{width:100%;padding:var(--space-025) var(--space-035);background-color:var(--c-surface);color:var(--c-text);border:1px solid var(--c-border);border-radius:var(--border-radius-sm);font-family:var(--main-font);font-size:.85rem;font-weight:600;cursor:pointer;transition:all .2s ease;text-align:center}.sidebar-toggle-button:hover{background-color:var(--c-border);border-color:var(--c-text-muted)}.sidebar-toggle-button:focus{outline:none;border-color:var(--c-accent);box-shadow:0 0 0 2px rgba(var(--c-accent-rgb),.2)}.sidebar-toggle-button.extended{background-color:var(--c-accent)!important;color:var(--c-surface)!important;border-color:var(--c-accent)!important}.mic-device-selector{width:100%;padding:var(--space-015) var(--space-025);border:1px solid var(--c-border);border-radius:var(--border-radius-sm);background-color:var(--c-surface);color:var(--c-text);font-family:var(--main-font);font-size:.9rem}.mic-device-selector:focus{outline:none;border-color:var(--c-accent);box-shadow:0 0 0 2px rgba(var(--c-accent-rgb),.2)}.keyboard-shortcuts-container{margin-top:1rem;padding-top:.75rem;border-top:1px solid var(--c-border-light, #e8ecf0)}.keyboard-shortcuts-container h4{margin-bottom:.5rem;font-size:.875rem;font-weight:600;color:var(--c-text-muted, #6c757d)}.shortcuts-list{display:flex;flex-direction:column;gap:.25rem}.shortcut-item{display:flex;justify-content:space-between;align-items:center;padding:.125rem 0;font-size:.75rem}.shortcut-key{font-family:SF Mono,Monaco,Cascadia Code,Roboto Mono,Consolas,Courier New,monospace;background-color:var(--c-surface, #f8f9fa);color:var(--c-text, #212529);padding:.125rem .25rem;border-radius:3px;border:1px solid var(--c-border, #dee2e6);font-weight:500;min-width:3rem;text-align:center;white-space:nowrap}.shortcut-desc{color:var(--c-text-muted, #6c757d);font-weight:400;text-align:right;flex:1;margin-left:.5rem}@media(prefers-color-scheme:dark){.keyboard-shortcuts-container{border-top-color:var(--c-border-dark, #495057)}.keyboard-shortcuts-container h4{color:var(--c-text-dark, #e2e8f0)}.shortcut-key{background-color:var(--c-surface-dark, #2d3748);color:var(--c-text-dark, #e2e8f0);border-color:var(--c-border-dark, #4a5568)}.shortcut-desc{color:var(--c-text-muted-dark, #a0aec0)}}@media(max-width:768px){.shortcut-item{font-size:.7rem}.shortcut-key{font-size:.65rem;padding:.1rem .2rem;min-width:2.5rem}}#print-preview-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#0009;display:flex;justify-content:center;align-items:center;z-index:1000;opacity:1;transition:opacity .3s ease}#print-preview-overlay.hidden{opacity:0;pointer-events:none}#print-preview-modal{background-color:var(--c-surface);border-radius:var(--border-radius-md);box-shadow:var(--box-shadow-md);width:80vw;height:80dvh;display:flex;flex-direction:column}.print-preview-header{display:flex;justify-content:space-between;align-items:center;padding:10px 20px;border-bottom:1px solid var(--c-border);flex-shrink:0}.print-preview-header h2{margin:0;font-size:18px}.print-preview-content{flex-grow:1;display:flex;gap:20px;padding:20px;min-height:0}.print-preview-canvas-wrapper{flex-grow:1;border:1px dashed var(--c-border);background-color:gray;overflow:auto;padding:12px;display:flex;justify-content:center;align-items:center;position:relative}#print-preview-canvas{display:block;background-color:#fff;box-shadow:0 4px 12px #0000004d}#print-crop-overlay{position:absolute;pointer-events:none;cursor:default}#print-preview-overlay:not(.hidden) #print-crop-overlay{pointer-events:auto}.print-preview-options{flex-basis:280px;flex-shrink:0;display:flex;flex-direction:column;gap:15px}.print-option-row{display:grid;grid-template-columns:90px 40px 1fr;align-items:center;gap:10px}.print-option-row label{font-weight:700}.print-option-row span{font-family:monospace;font-size:12px}.print-select{grid-column:2 / -1;width:100%;padding:6px 8px;border:1px solid var(--c-border);border-radius:4px;background-color:var(--c-surface);color:var(--c-text)}.print-preview-options h3{margin-top:10px;margin-bottom:5px;border-bottom:1px solid var(--c-gridline);padding-bottom:5px}.print-preview-footer{padding:10px 20px;border-top:1px solid var(--c-border);text-align:right;flex-shrink:0}.close-button{background:none;border:none;font-size:24px;line-height:1;padding:0 5px;color:var(--c-text-muted);cursor:pointer}.confirm-button{background-color:#28a745;font-weight:700}.confirm-button:hover{background-color:#218838}.toggle-button{width:100%;grid-column:2 / -1}.toggle-button.active{background-color:var(--c-accent)}.toggle-button:not(.active){background-color:var(--c-gridline);color:var(--c-text)}.print-info-box{background-color:var(--c-surface-muted);border:1px solid var(--c-border);border-radius:4px;padding:12px;font-size:13px;line-height:1.5}.print-info-box p{margin:0 0 8px}.print-info-box p:last-child{margin-bottom:0}.print-info-box small{font-size:11px;color:var(--c-text-muted)}@media print{body>#app-container,body>#print-preview-overlay{display:none!important}#print-staging-area{display:block!important;visibility:visible!important;margin:0;padding:0}#print-staging-area img{display:block!important;visibility:visible!important;width:100%;height:auto}}#print-staging-area{display:none}#notification-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#0006;display:flex;justify-content:center;align-items:center;z-index:2000;opacity:0;visibility:hidden;transition:opacity .3s ease,visibility .3s ease}#notification-overlay.visible{opacity:1;visibility:visible}.notification-modal{background-color:var(--c-surface);border-radius:var(--border-radius-md);box-shadow:var(--box-shadow-md);max-width:400px;width:90%;padding:var(--space-050);text-align:center;transform:scale(.9) translateY(20px);transition:transform .3s ease}#notification-overlay.visible .notification-modal{transform:scale(1) translateY(0)}.notification-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--space-035)}.notification-title{font-size:var(--font-size-lg);font-weight:600;color:var(--c-text);margin:0}.notification-close{background:none;border:none;font-size:20px;line-height:1;padding:var(--space-015);color:var(--c-text-muted);cursor:pointer;border-radius:var(--border-radius-sm);transition:background-color .2s ease}.notification-close:hover{background-color:var(--c-gridline)}.notification-message{font-size:var(--font-size-base);color:var(--c-text);margin-bottom:var(--space-050);line-height:1.5}.notification-actions{display:flex;gap:var(--space-025);justify-content:center}.notification-button{background-color:var(--c-accent);color:var(--c-surface);border:none;border-radius:var(--border-radius-md);padding:var(--space-025) var(--space-050);font-family:var(--main-font);font-size:var(--font-size-sm);font-weight:500;cursor:pointer;transition:background-color .2s ease}.notification-button:hover{background-color:var(--c-accent-hover)}.notification-button.secondary{background-color:var(--c-gridline);color:var(--c-text)}.notification-button.secondary:hover{background-color:var(--c-border)}.position-controls-container{display:flex;flex-direction:row;flex-wrap:nowrap;padding:0;justify-content:center;align-items:stretch;background-color:var(--c-surface);gap:.5rem;height:100%;min-height:100%;flex:0 1 auto;width:fit-content}.position-control-group{display:flex;flex-direction:column;align-items:center;gap:0rem;min-width:100px;position:relative;margin-left:0rem;z-index:10;flex:1 1 100%;height:100%;min-height:100%}.position-label{font-size:.8rem;font-weight:600;color:var(--c-text);margin:0rem;text-align:center;text-transform:uppercase;letter-spacing:.5px;position:absolute;top:.3rem;left:50%;transform:translate(-50%);z-index:30;pointer-events:none}.position-dial{position:relative;width:var(--position-dial-size, 5.5rem);height:var(--position-dial-size, 5.5rem)}.position-component-wrapper{display:flex;flex-direction:row;align-items:stretch;gap:.25rem;height:100%;min-height:100%;flex:1 1 100%}.position-component{width:auto;aspect-ratio:1 / 1;height:100%;max-height:100%;max-width:100%;overflow:hidden;position:relative;z-index:15;flex-shrink:0}.position-component svg{display:block;position:relative;z-index:20}.position-axis-labels{position:absolute;inset:0;width:100%;height:100%;pointer-events:none;font-size:.6rem;color:var(--c-text-muted);text-transform:uppercase;letter-spacing:.5px;font-weight:500;z-index:25}.position-axis-labels:after,.position-axis-labels:before{content:"";position:absolute;white-space:nowrap;text-align:center}.position-axis-labels:after{content:attr(data-axis-x);left:50%;bottom:0;transform:translate(-50%)}.position-axis-labels:before{content:attr(data-axis-y);left:var(--position-axis-y-padding, .35rem);top:50%;transform-origin:center center;transform:translate(-50%,-50%) rotate(-90deg)}@media(max-width:768px){:root{--position-dial-size: 100px;--position-axis-y-padding: .25rem}}:root{--position-available-height: calc(var(--toolbar-block-size) - var(--preset-tab-rail-height) - 20px);--position-dial-size: min(5.5rem, var(--position-available-height));--position-axis-y-padding: .35rem;--position-bg-blue: rgba(74, 144, 226, .1);--position-handle-blue: #4a90e2;--position-bg-black: rgba(45, 45, 45, .1);--position-handle-black: #2d2d2d;--position-bg-red: rgba(214, 101, 115, .1);--position-handle-red: #d66573;--position-bg-green: rgba(104, 160, 63, .1);--position-handle-green: #68a03f}#harmony-toolkit-container{display:flex;align-items:center;justify-content:center;padding:0 var(--space-025)}#x-chord-shape-tool{width:40px;height:40px;font-size:20px;font-weight:700;padding:0;border:1px solid var(--c-border);background-color:var(--c-surface);color:var(--c-text);border-radius:var(--border-radius-sm)}#x-chord-shape-tool.selected{border:2px solid var(--c-accent);box-shadow:0 0 5px var(--c-accent)}#chord-toolbar-wrapper{background-color:var(--c-gridline);border:1px solid var(--c-border);border-radius:var(--border-radius-md);display:flex;align-items:center;padding:var(--space-015);margin-top:var(--space-025);width:100%;box-shadow:none;transition:opacity .2s}#chord-toolbar-wrapper.collapsed{display:none}.chord-toolbar-panel{display:flex;gap:var(--space-015)}.chord-toolbar-panel select{padding:var(--space-015);border-radius:var(--border-radius-sm);border:1px solid var(--c-border);background-color:var(--c-surface);transition:border-color .2s}.chord-toolbar-panel select option:disabled{color:var(--c-text-muted);opacity:.5;pointer-events:none}.chord-toolbar-panel select.invalid-reset{border-color:var(--c-danger);box-shadow:0 0 3px var(--c-danger)}#chord-toolbar-collapse-btn{background:none;border:none;color:var(--c-text-muted);font-size:16px;width:24px;height:24px;display:flex;align-items:center;justify-content:center;border-radius:var(--border-radius-sm)}#chord-toolbar-collapse-btn:hover{background-color:var(--c-gridline)}.range-content-box{background-color:var(--c-surface);border:1px solid var(--c-border);border-radius:var(--border-radius-md);padding:var(--space-015);box-shadow:var(--box-shadow-sm);position:relative;z-index:1;width:100%;flex:1 1 0;min-height:0;max-height:100%;display:flex;flex-direction:column;overflow:hidden}.range-layout{display:flex;flex-direction:row;gap:var(--space-025);align-items:stretch;width:100%;height:100%;min-height:0;flex:1}.range-panel-section{display:flex;flex-direction:column;gap:0;align-items:flex-start;min-height:0;height:100%}.range-panel-section.modes-section{flex:1 1 auto;min-height:0;height:100%}.range-panel-section.degrees-section{flex:0 1 auto;min-height:0;overflow:hidden}.range-panel-section.wheels-section{flex:1 1 auto;min-height:0;display:flex;flex-direction:column;height:100%}.range-panel-section.summary-section{flex:0 0 auto}.range-panel-section.presets-section{flex:0 0 auto;height:100%}.tonic-modes-container{flex:1 1 auto;display:flex;flex-direction:column;min-height:0;min-width:0;max-height:100%;height:100%}.tonic-modes-grid{display:grid;grid-template-columns:repeat(2,1fr);grid-auto-rows:minmax(0,1fr);gap:var(--space-015);width:100%;flex:1;min-height:0;max-height:100%;overflow:hidden;height:100%}.tonic-mode-button{background-color:transparent;color:var(--c-text);border:1px solid var(--c-border);border-radius:var(--border-radius-sm);padding:var(--space-005) var(--space-010);display:flex;flex-direction:row;align-items:center;justify-content:flex-start;gap:var(--space-010);cursor:pointer;transition:background-color .2s ease,border-color .2s ease,color .2s ease,box-shadow .2s ease;min-height:0;max-height:100%;overflow:hidden;height:100%;width:100%}.tonic-mode-icon{width:1.2rem;height:1.2rem;object-fit:contain;flex-shrink:0}.tonic-mode-label{font-size:.65rem;font-weight:600;color:var(--c-text);text-align:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;line-height:1.1}.tonic-mode-button:hover{background-color:var(--c-border)}.tonic-mode-button:focus{background-color:transparent;color:var(--c-text);outline:none}.tonic-mode-button:focus:hover{background-color:var(--c-border)}.tonic-mode-button.selected{background-color:var(--c-accent-neutral-light, #ffd54f);color:var(--c-text, #212529);border-color:var(--c-accent-neutral, #ffc107);box-shadow:0 0 8px #ffc10773}.tonic-mode-button.selected .tonic-mode-label{color:var(--c-text);font-weight:700}.tonic-mode-button.selected:focus{background-color:var(--c-accent-neutral-light);color:var(--c-text)}.tonic-degrees-container{flex:0 1 auto;display:flex;flex-direction:column;gap:var(--space-025);min-width:140px;max-width:160px;align-items:stretch;justify-content:flex-start;height:100%;min-height:0;overflow:hidden}.degree-toggle-container{display:flex;flex-direction:column;gap:var(--space-025);align-items:stretch;justify-content:center;flex:0 1 220px}.degree-visibility-toggle-container{display:flex;flex-direction:column;align-items:stretch;gap:var(--space-010);justify-content:center;width:100%}.degree-mode-toggle-container{display:grid;grid-template-columns:repeat(2,1fr);gap:var(--space-010);width:100%}.degree-mode-toggle-container.disabled{opacity:.75}.focus-colours-container .checkbox-text{font-size:.7em}.focus-colours-container{display:flex;align-items:center;justify-content:center;flex:0 1 140px}@media(max-width:900px){.tonic-tools-wrapper{flex-direction:column}#tonic-mode-grid,.degree-toggle-container,.focus-colours-container{flex:1 1 auto}}.degree-toggle-container{display:flex;flex-direction:column;gap:var(--space-015);height:100%}.degree-visibility-button{width:100%;padding:var(--space-025) var(--space-050);background-color:var(--c-surface);color:var(--c-text);border:1px solid var(--c-border);border-radius:var(--border-radius-sm);font-weight:700;letter-spacing:.2px;transition:background-color .2s ease,border-color .2s ease,color .2s ease,box-shadow .2s ease,opacity .2s ease}.degree-visibility-button:hover:not(.active),.degree-visibility-button:focus-visible:not(.active){background-color:var(--c-surface);border-color:var(--c-border);box-shadow:none;color:var(--c-text)}.degree-visibility-button.active{background-color:var(--c-accent-neutral-light, #ffd54f);border-color:var(--c-accent-neutral, #ffc107);color:var(--c-text);box-shadow:0 0 6px rgba(var(--c-accent-neutral-rgb, 255, 193, 7),.5)}.degree-mode-button{width:100%;padding:var(--space-020) var(--space-030);background-color:var(--c-surface);color:var(--c-text);border:1px solid var(--c-border);border-radius:var(--border-radius-sm);font-weight:600;transition:background-color .2s ease,border-color .2s ease,color .2s ease,box-shadow .2s ease,opacity .2s ease}.degree-mode-button:hover:not(.disabled):not(:disabled):not(.active),.degree-mode-button:focus-visible:not(.disabled):not(:disabled):not(.active){background-color:var(--c-surface);border-color:var(--c-border);box-shadow:none;color:var(--c-text)}.degree-mode-button.active{background-color:var(--c-accent-neutral-light, #ffd54f);border-color:var(--c-accent-neutral, #ffc107);color:var(--c-text);box-shadow:0 0 6px rgba(var(--c-accent-neutral-rgb, 255, 193, 7),.4)}.degree-mode-button.disabled,.degree-mode-button:disabled{opacity:.6;cursor:not-allowed;background-color:var(--c-surface);border-color:var(--c-border);box-shadow:none}.range-panel-section.degrees-section .checkbox-label{margin-top:var(--space-015)}:root{--clef-option-height: 40px}.clef-content-box{background-color:var(--c-surface);border:1px solid var(--c-border);border-radius:var(--border-radius-md);padding:var(--space-015);box-shadow:var(--box-shadow-sm);position:relative;z-index:1;width:100%;flex:1 1 0;min-height:0;max-height:100%;display:flex;flex-direction:column;overflow:hidden}.clef-picker-grid{display:flex;flex-direction:row;gap:var(--space-025);align-items:flex-start;width:100%;height:100%;min-height:0}.clef-wheels-wrapper{display:flex;flex-direction:row;gap:var(--space-025);align-items:stretch;flex:1;min-height:0;height:100%}.clef-picker-column{display:flex;flex-direction:column;gap:var(--space-015);align-items:stretch;flex:1;min-height:0;min-width:0;height:100%}.clef-wheel{position:relative;border-radius:18px;background:linear-gradient(180deg,#ffffffe6,#f8f9fad9);border:1px solid rgba(0,0,0,.05);box-shadow:0 10px 30px #00000014,inset 0 1px #ffffff80;height:100%;min-height:0;max-height:100%;width:clamp(70px,8dvw,90px);min-width:0;outline:none;cursor:grab;display:flex;align-items:center;justify-content:center;transition:box-shadow .2s ease,border-color .2s ease}.clef-wheel:focus-visible{border-color:var(--c-accent-neutral, #ffc107);box-shadow:0 0 0 3px rgba(var(--c-accent-neutral-rgb, 255, 193, 7),.25),inset 0 1px #fff9}.clef-wheel:active{cursor:grabbing}.clef-wheel-viewport{position:relative;width:100%;height:100%;overflow:hidden;display:flex;align-items:stretch;justify-content:center}.clef-wheel-options{position:relative;display:flex;flex-direction:column;align-items:center;width:100%;transform:translateY(0);transition:transform .18s ease-out;will-change:transform}.clef-wheel-option{width:100%;text-align:center;height:40px;display:flex;align-items:center;justify-content:center;font-size:.8rem;font-weight:500;color:#21252959;-webkit-user-select:none;user-select:none;pointer-events:none;transform-origin:center;transition:color .18s ease-out,transform .18s ease-out,opacity .18s ease-out;opacity:.3}.clef-wheel-option[data-distance="0"]{font-size:.95rem;color:var(--text-strong, #212529);opacity:1}.clef-wheel-option[data-distance="1"]{opacity:.55;transform:scale(.95)}.clef-wheel-option[data-distance="2"]{opacity:.4;transform:scale(.9)}.clef-wheel-overlay{position:absolute;inset:0;pointer-events:none;background:linear-gradient(180deg,#f8f9faeb,#fff0 20% 80%,#f8f9faeb);border-radius:18px}.clef-wheel-overlay:before{content:"";position:absolute;left:0%;right:0%;top:50%;height:calc(var(--clef-option-height) * .75);border-radius:16px;border:1px solid rgba(var(--c-accent-neutral-rgb, 255, 193, 7),.35);background:rgba(var(--c-accent-neutral-rgb, 255, 193, 7),.12);transform:translateY(-50%);box-shadow:inset 0 0 0 1px #fff6}.clef-summary-column{display:flex;flex-direction:column;flex:0 1 auto;min-width:fit-content;width:auto;min-height:0}.clef-summary-card{background:var(--c-surface);border-radius:var(--border-radius-md);padding:var(--space-015);border:1px solid var(--c-border);box-shadow:var(--box-shadow-sm);display:flex;flex-direction:column;gap:var(--space-015);height:100%;min-height:0;overflow:hidden;font-size:.7rem;width:fit-content;min-width:14ch}.clef-summary-card h4{margin:0;font-size:.7rem;font-weight:600}.clef-summary-label{font-size:.8rem;font-weight:600;color:var(--text-strong, #212529);min-height:1.2em;line-height:1.2;min-width:12ch}.clef-summary-metadata{font-size:.65rem;color:var(--text-muted, #6c757d)}.clef-snap-toggle{display:flex;align-items:center;gap:6px;font-size:.65rem;color:var(--text-muted, #6c757d);margin-top:4px;-webkit-user-select:none;user-select:none;cursor:pointer}.clef-snap-toggle input[type=checkbox]{appearance:none;width:32px;height:16px;border-radius:16px;background:#00000026;position:relative;transition:background .2s ease;outline:none;cursor:pointer}.clef-snap-toggle input[type=checkbox]:after{content:"";position:absolute;top:2px;left:2px;width:12px;height:12px;border-radius:50%;background:#fff;box-shadow:0 1px 2px #00000040;transition:transform .2s ease}.clef-snap-toggle input[type=checkbox]:checked{background:rgba(var(--c-accent-neutral-rgb, 255, 193, 7),.7)}.clef-snap-toggle input[type=checkbox]:checked:after{transform:translate(16px)}.clef-presets-column{display:flex;flex-direction:column;flex:0 0 auto;min-width:fit-content;min-height:0;justify-content:center;height:100%}.clef-preset-buttons{display:flex;flex-direction:column;gap:var(--space-015);flex-wrap:nowrap;height:100%;align-items:stretch}.clef-preset-button{min-width:0;min-height:0;flex:1 1 0;padding:var(--space-015) var(--space-025);font-size:.7rem;white-space:nowrap;background:var(--c-surface);color:var(--c-text);border:1px solid var(--c-border);box-shadow:var(--box-shadow-sm);transition:background-color .15s ease,color .15s ease,border-color .15s ease,box-shadow .15s ease}.clef-preset-button:not(.active){background:var(--c-surface);color:var(--c-text);border-color:var(--c-border);box-shadow:var(--box-shadow-sm)}.clef-preset-button.active{background:linear-gradient(180deg,rgba(var(--c-accent-neutral-rgb, 255, 193, 7),.9),rgba(var(--c-accent-neutral-rgb, 255, 193, 7),.75));border-color:rgba(var(--c-accent-neutral-rgb, 255, 193, 7),1);color:var(--c-surface);box-shadow:var(--box-shadow-md)}.clef-preset-button.active:hover,.clef-preset-button.active:focus-visible{background:linear-gradient(180deg,rgba(var(--c-accent-neutral-rgb, 255, 193, 7),1),rgba(var(--c-accent-neutral-rgb, 255, 193, 7),.85));border-color:rgba(var(--c-accent-neutral-rgb, 255, 193, 7),1);color:var(--c-surface)}.clef-preset-button:hover,.clef-preset-button:focus-visible{background:rgba(var(--c-accent-neutral-rgb, 255, 193, 7),.18);border-color:rgba(var(--c-accent-neutral-rgb, 255, 193, 7),.5);box-shadow:var(--box-shadow-md)}.clef-preset-button:active{background:rgba(var(--c-accent-neutral-rgb, 255, 193, 7),.32);border-color:rgba(var(--c-accent-neutral-rgb, 255, 193, 7),.65);color:var(--c-text)}.clef-wheel[data-disabled=true]{opacity:.5;cursor:not-allowed}@media(max-width:1200px){.clef-picker-grid{grid-template-columns:repeat(2,auto);grid-auto-rows:auto}.clef-summary-column{grid-column:span 2}}@media(max-width:900px){.clef-picker-grid{grid-template-columns:auto}.clef-summary-column{grid-column:span 1}}.draw-content-box{display:flex;flex-direction:column;gap:clamp(var(--space-010),.8dvh,var(--space-035));padding:clamp(var(--space-010),.8dvh,var(--space-015));width:auto;max-width:100%;height:100%;max-height:100%;overflow:visible;align-self:stretch;background-color:var(--c-surface);border:1px solid var(--c-border);border-radius:var(--border-radius-md);box-shadow:var(--box-shadow-sm);position:relative;z-index:2}.draw-layout-grid{display:grid;grid-template-columns:repeat(5,auto);gap:clamp(var(--space-010),.8dvh,var(--space-025));align-items:stretch;justify-content:start;height:100%;min-height:0}.draw-tool-panel{display:flex;flex-direction:column;gap:clamp(var(--space-010),.8dvh,var(--space-015));width:auto;min-width:0;min-height:0;height:100%;transition:opacity .2s ease;position:relative;z-index:1}.draw-tool-panel.active{opacity:1}.draw-tool-panel:not(.active){opacity:.6}.draw-tool-header{display:flex;justify-content:center;align-items:center}.draw-tool-button{width:clamp(1.4rem,2.8dvh,2rem);height:clamp(1.4rem,2.8dvh,2rem);padding:clamp(var(--space-005),.4dvh,var(--space-015));display:flex;align-items:center;justify-content:center;background-color:var(--c-surface);border:2px solid var(--c-border);border-radius:var(--border-radius-md);cursor:pointer;transition:all .2s ease;color:var(--c-text-muted)}.draw-tool-button:hover{background-color:var(--c-gridline);border-color:var(--c-text-muted);transform:scale(1.05)}.draw-tool-button.active{background-color:var(--c-accent, #4a90e2);border-color:var(--c-accent, #4a90e2);color:var(--c-surface)}.draw-tool-button svg{width:100%;height:100%}.draw-tool-options{display:flex;flex-direction:column;gap:clamp(var(--space-010),.8dvh,var(--space-025));padding:clamp(var(--space-010),.8dvh,var(--space-015));background-color:var(--c-surface-muted);border:1px solid var(--c-border);border-radius:var(--border-radius-md);flex:1;min-height:0;width:100%;max-height:100%;position:relative;box-shadow:var(--box-shadow-sm);min-width:clamp(140px,18dvw,180px)}.draw-tool-options:empty{min-height:2rem}.draw-toolbar-row{display:flex;gap:clamp(var(--space-010),.8dvh,var(--space-015));align-items:center;justify-content:center}.draw-toolbar-button{width:clamp(1.2rem,2.4dvh,1.5rem);height:clamp(1.2rem,2.4dvh,1.5rem);padding:clamp(var(--space-005),.3dvh,var(--space-015));display:flex;align-items:center;justify-content:center;background-color:var(--c-surface);border:1px solid var(--c-border);border-radius:var(--border-radius-sm);cursor:pointer;transition:all .2s ease;color:var(--c-text)}.draw-toolbar-button:hover{background-color:var(--c-gridline);border-color:var(--c-text-muted)}.draw-toolbar-button svg{width:100%;height:100%}.draw-popup-menu{position:absolute;display:none;flex-direction:column;gap:clamp(var(--space-010),.8dvh,var(--space-015));padding:clamp(var(--space-010),.8dvh,var(--space-015));background-color:var(--c-surface);border:1px solid var(--c-border);border-radius:var(--border-radius-md);box-shadow:var(--box-shadow-md);z-index:3000}.draw-popup-option{padding:var(--space-015);background-color:var(--c-surface);border:1px solid var(--c-border);border-radius:var(--border-radius-sm);cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;min-width:40px}.draw-popup-option:hover{background-color:var(--c-gridline);border-color:var(--c-text-muted)}.draw-popup-option.active{background-color:var(--c-gridline);border-color:var(--c-accent, #4a90e2);border-width:2px;color:var(--c-text)}.draw-popup-trigger{position:relative}.draw-popup-trigger:focus-within .draw-popup-menu,.draw-popup-trigger:hover .draw-popup-menu{display:flex}.draw-popup-trigger:focus-within,.draw-popup-trigger:hover{z-index:6}.draw-tool-panel:focus-within,.draw-tool-panel:hover{z-index:5}.draw-popup-option.active svg,.draw-popup-option.active svg *{stroke:var(--c-accent, #4a90e2)}.draw-popup-option svg{display:block;stroke:var(--c-text)}.draw-popup-option svg *{stroke:var(--c-text)}.draw-option-group{display:flex;flex-direction:column;gap:clamp(var(--space-010),.8dvh,var(--space-015))}.draw-option-group.draw-toolbar-row{flex-direction:row;align-items:center;gap:clamp(var(--space-010),.8dvh,var(--space-015));flex-wrap:wrap}.draw-option-label{font-size:clamp(.55rem,1dvh,var(--font-size-sm));font-weight:600;color:var(--c-text-muted);text-transform:uppercase;letter-spacing:.5px;white-space:nowrap}.draw-button-group{display:flex;gap:clamp(var(--space-010),.8dvh,var(--space-015));flex-wrap:wrap}.draw-option-button{padding:clamp(var(--space-005),.4dvh,var(--space-015)) clamp(var(--space-010),.6dvh,var(--space-025));background-color:var(--c-surface);border:1px solid var(--c-border);border-radius:var(--border-radius-sm);cursor:pointer;font-size:clamp(.6rem,1.2dvh,var(--font-size-sm));color:var(--c-text);transition:all .2s ease}.draw-option-button:hover{background-color:var(--c-gridline);border-color:var(--c-text-muted)}.draw-option-button.active{background-color:var(--c-accent, #4a90e2);border-color:var(--c-accent, #4a90e2);color:var(--c-surface)}.text-style-rows{display:flex;flex-direction:column;gap:clamp(var(--space-005),.5dvh,var(--space-010))}.draw-swap-button{padding:var(--space-015);background-color:var(--c-surface);border:1px solid var(--c-border);border-radius:var(--border-radius-sm);cursor:pointer;display:flex;align-items:center;justify-content:center}.draw-swap-button:hover{background-color:var(--c-gridline)}.draw-color-picker{display:flex;gap:clamp(var(--space-010),.8dvh,var(--space-015))}.draw-color-button{width:clamp(1.4rem,2.8dvh,2rem);height:clamp(1.4rem,2.8dvh,2rem);border-radius:50%;border:2px solid transparent;cursor:pointer;transition:all .2s ease}.draw-color-button:hover{transform:scale(1.1);border-color:var(--c-text-muted)}.draw-color-button.active{border-color:var(--c-text);border-width:3px;transform:scale(1.1)}.draw-stroke-size-group{display:flex;gap:clamp(var(--space-010),.8dvh,var(--space-015))}.draw-stroke-size-button{width:3rem;padding:clamp(var(--space-010),.8dvh,var(--space-015));background-color:var(--c-surface);border:1px solid var(--c-border);border-radius:var(--border-radius-sm);cursor:pointer;font-size:var(--font-size-sm);transition:all .2s ease}.draw-stroke-size-button:hover{background-color:var(--c-gridline);border-color:var(--c-text-muted)}.draw-stroke-size-button.active{background-color:var(--c-accent, #4a90e2);border-color:var(--c-accent, #4a90e2);color:var(--c-surface)}.annotation-text-input{caret-color:#4a90e2;user-select:text;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text}.annotation-text-input::selection{background-color:#4a90e2;color:#fff}.draw-option-help{max-width:200px;max-height:3.6em;font-size:clamp(.55rem,1dvh,.7rem);line-height:1.2;overflow-wrap:anywhere;white-space:normal;overflow:hidden}.control-section:has(.tempo-container){width:auto;min-width:max-content}.tempo-content-box{display:flex;flex-direction:column;background-color:var(--c-surface);border:1px solid var(--c-border);border-radius:var(--border-radius-md);box-shadow:var(--box-shadow-sm);padding:var(--space-015);flex:1;min-height:0;overflow:hidden}.tempo-container{display:grid;grid-template-columns:minmax(0,1fr) auto;grid-template-rows:1fr;gap:var(--space-035);background-color:transparent;border:none;--c-accent: var(--c-accent-neutral);--c-accent-light: var(--c-accent-neutral-light);padding:0 var(--space-015);border-radius:0;flex:1;min-height:0;height:100%;width:auto;min-width:max-content;align-items:stretch}.tempo-boxes-container{display:flex;flex-direction:column;justify-content:space-evenly;gap:var(--space-020);grid-column:1;grid-row:1;height:100%;max-height:100%;min-height:0;padding:var(--space-010) 0}.tempo-row{display:flex;align-items:center;justify-content:space-between;gap:var(--space-015);width:100%;flex:1 1 0;min-height:0;padding:var(--space-015);background-color:var(--c-surface-muted);border:1px solid var(--c-border);border-radius:var(--border-radius-sm);box-shadow:var(--box-shadow-sm)}.tempo-column-2{display:flex;flex-direction:column;justify-content:center;align-items:stretch;grid-column:2;grid-row:1;min-width:var(--slider-thumb-total);width:var(--slider-thumb-total);min-height:clamp(60px,12dvh,150px);height:100%;max-height:100%;overflow:hidden;padding:var(--space-010) 0}.tempo-input-group{display:flex;flex-direction:row;align-items:center;gap:var(--space-015);width:100%;justify-content:space-between}.tempo-label-icon{height:1.2rem;width:auto;-webkit-user-select:none;user-select:none;transform-origin:center;transition:transform .08s ease-out}#eighth-note-tempo,#quarter-note-tempo,#dotted-quarter-tempo{transform-origin:center;transition:transform .08s ease-out}.tempo-input{width:45px;background-color:var(--c-surface);color:var(--c-text);border:1px solid var(--c-border);border-radius:var(--border-radius-sm);text-align:center;font-family:var(--main-font)}.tempo-input::-webkit-outer-spin-button,.tempo-input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.draggable-number-input{cursor:ns-resize;transition:border-color .2s ease,box-shadow .2s ease}.draggable-number-input:hover{border-color:var(--c-accent)}.draggable-number-input:focus{cursor:text;box-shadow:0 0 0 2px var(--c-accent-light)}.adsr-container{display:grid;grid-template-columns:1fr auto;grid-template-rows:1fr auto;gap:0;overflow:hidden;padding:5px 0 0 5px;flex:0 0 12.5rem;min-height:0;width:12.5rem;min-width:12.5rem;background-color:var(--c-surface);border:1px solid var(--c-border);border-radius:var(--border-radius-md)}.adsr-graph-wrapper{grid-column:1;grid-row:1;position:relative;border:1px solid var(--c-border);border-radius:var(--border-radius-sm);overflow:visible;min-height:0;min-width:0}#adsr-envelope{position:relative;width:100%;height:100%;overflow:visible}#adsr-envelope svg{display:block;width:100%;height:100%;background-color:var(--c-surface)}.sustain-slider-wrapper{grid-column:2;grid-row:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding-inline:0rem;width:fit-content;max-width:var(--slider-thumb-size);min-width:var(--slider-thumb-size)}#sustain-slider-track{position:relative;width:var(--slider-track-thickness);height:100%;background-color:var(--c-gridline);border-radius:var(--border-radius-sm)}#sustain-slider-track:before{content:"";position:absolute;bottom:0;left:0;width:100%;height:var(--sustain-progress, 0%);background-color:var(--c-accent);border-radius:var(--border-radius-sm)}#sustain-slider-track:after{content:"";position:absolute;top:0;left:0;width:100%;height:var(--ineligible-height, 0%);background-color:#80808066;border-radius:var(--border-radius-sm);pointer-events:none}#sustain-slider-thumb{position:absolute;left:50%;transform:translate(-50%,50%);width:var(--slider-thumb-size);height:var(--slider-thumb-size);background-color:var(--c-accent);border-radius:50%;border:var(--slider-thumb-border) solid var(--c-surface);box-shadow:var(--box-shadow-sm);cursor:grab;color:var(--c-surface);font-size:12px;font-weight:700;display:flex;justify-content:center;align-items:center;-webkit-user-select:none;user-select:none}#sustain-slider-thumb:active{cursor:grabbing;background-color:var(--c-accent-hover);transform:translate(-50%,50%) scale(1.1)}#multi-thumb-slider-container{grid-column:1;grid-row:2;position:relative;width:100%;height:var(--slider-track-thickness);min-height:var(--slider-thumb-size);min-width:0;display:flex;align-items:center}#multi-thumb-slider-container:before{content:"";position:absolute;left:0;right:0;height:var(--slider-track-thickness);border-radius:var(--border-radius-sm);background:linear-gradient(to right,var(--c-accent) var(--adr-progress, 0%),var(--c-gridline) var(--adr-progress, 0%))}.time-slider-thumb{position:absolute;top:50%;transform:translate(-50%,-50%);width:var(--slider-thumb-size);height:var(--slider-thumb-size);background-color:var(--c-accent);border-radius:50%;border:var(--slider-thumb-border) solid var(--c-surface);box-shadow:var(--box-shadow-sm);cursor:grab;color:var(--c-surface);font-size:12px;font-weight:700;display:flex;justify-content:center;align-items:center;-webkit-user-select:none;user-select:none}.time-slider-thumb:active{cursor:grabbing;background-color:var(--c-accent-hover);transform:translate(-50%,-50%) scale(1.1)}.filter-container{display:grid;grid-template-columns:auto auto;grid-template-rows:auto 1fr auto;gap:0;flex:1 1 auto;margin-left:0;min-height:0;height:100%;background-color:var(--c-surface);border:1px solid var(--c-border);border-radius:var(--border-radius-md);padding:0 0 0 5px}.blend-slider-container{grid-column:1;grid-row:1;display:flex;align-items:center;margin:0;padding:0;min-height:var(--slider-thumb-size)}.filter-bins-wrapper{grid-column:1;grid-row:2;display:flex;min-height:0}.filter-vertical-blend-wrapper{grid-column:2;grid-row:2;display:flex;align-items:center;justify-content:center;min-height:0;min-width:var(--slider-thumb-size)}#filter-enable-toggle{flex-shrink:0;background-color:var(--c-gridline);color:var(--c-text-muted);border:1px solid var(--c-border);display:none}#filter-enable-toggle .filter-icon{width:24px;height:24px}#filter-enable-toggle.active{background-color:var(--c-accent);color:var(--c-surface);border-color:var(--c-accent-hover)}#blend-slider-container,#cutoff-slider-container{position:relative;width:100%;height:var(--slider-track-thickness);min-height:var(--slider-thumb-size);display:flex;align-items:center;flex-shrink:0}#blend-slider-container:before,#cutoff-slider-container:before{content:"";position:absolute;left:0;right:0;height:var(--slider-track-thickness);border-radius:var(--border-radius-sm);background:linear-gradient(to right,var(--c-accent) var(--progress, 0%),var(--c-gridline) var(--progress, 0%))}#cutoff-slider-container{grid-column:1;grid-row:3;transition:opacity .2s;margin:0;padding:0}.filter-cutoff-thumb,.filter-blend-thumb{position:absolute;top:50%;transform:translate(-50%,-50%);width:var(--slider-thumb-size);height:var(--slider-thumb-size);font-size:12px;background-color:var(--c-accent);border-radius:50%;border:var(--slider-thumb-border) solid var(--c-surface);box-shadow:var(--box-shadow-sm);cursor:grab;color:var(--c-surface);font-weight:700;display:flex;justify-content:center;align-items:center;-webkit-user-select:none;user-select:none;z-index:5}.filter-cutoff-thumb:active,.filter-blend-thumb:active{cursor:grabbing;background-color:var(--c-accent-hover);transform:translate(-50%,-50%) scale(1.1)}.vertical-blend-wrapper{display:flex;flex-direction:column;align-items:center;justify-content:center;width:fit-content;min-width:var(--slider-thumb-size);height:100%;margin:0;padding:0}#vertical-blend-track{position:relative;width:var(--slider-track-thickness);height:100%;background:linear-gradient(to top,var(--c-accent) var(--blend-progress, 0%),var(--c-gridline) var(--blend-progress, 0%));border-radius:var(--border-radius-sm);cursor:pointer}#vertical-blend-thumb{position:absolute;left:50%;transform:translate(-50%,50%);width:var(--slider-thumb-size);height:var(--slider-thumb-size);background-color:var(--c-accent);border-radius:50%;border:var(--slider-thumb-border) solid var(--c-surface);box-shadow:var(--box-shadow-sm);cursor:ns-resize;color:var(--c-surface);font-size:12px;font-weight:700;display:flex;justify-content:center;align-items:center;-webkit-user-select:none;user-select:none;z-index:5}#vertical-blend-thumb:active{cursor:ns-resize;background-color:var(--c-accent-hover);transform:translate(-50%,50%) scale(1.1)}.overtone-bins-grid{display:flex;flex-direction:row;flex:1 1 auto;min-width:11rem;height:100%;min-height:60px;max-height:100%;position:relative;gap:0;padding:0;margin:0;border:1px solid var(--c-border);border-radius:2px;overflow:hidden}.slider-column{display:flex;flex-direction:column;flex:1;align-items:center;min-width:0;margin:0;padding:0;gap:0}.harmonic-label{font-size:.7rem;color:var(--c-text-muted);text-align:center;height:16px;display:flex;align-items:center;justify-content:center}.harmonic-label-internal{position:absolute;bottom:2px;left:50%;transform:translate(-50%);font-size:.8rem;font-weight:600;text-align:center;z-index:3;pointer-events:none;transition:color .1s ease,text-shadow .1s ease;-webkit-user-select:none;user-select:none}.slider-track{flex-grow:1;width:100%;background-color:#fff;border:none;border-radius:0;position:relative;cursor:pointer;margin:0;padding:0;min-height:0;display:flex;flex-direction:column;justify-content:flex-end;pointer-events:auto}.slider-snap-zone{position:absolute;bottom:0;left:0;right:0;height:10%;background-color:#f7f7f7;border-top:1px solid var(--c-border)}.slider-fill{position:absolute;bottom:0;left:0;right:0;background-color:transparent;transition:height .1s ease;border-radius:0 0 1px 1px}.phase-button{background-color:var(--c-gridline);color:var(--c-text-muted);border:1px solid var(--c-border);border-radius:3px;margin:0;padding:0;cursor:pointer;display:flex;align-items:center;justify-content:center;width:20px;height:20px;flex-shrink:0;position:relative}.phase-button:hover{background-color:var(--c-border);color:var(--c-text)}.phase-button svg{width:100%;height:100%}.filter-overlay-canvas{position:absolute;top:0;left:0;width:100%;height:calc(100% - 24px);pointer-events:none;z-index:2}.multislider-container.filter-disabled #blend-slider-container,.multislider-container.filter-disabled #cutoff-slider-container{opacity:.5;pointer-events:none}.multislider-container.filter-disabled .filter-overlay-canvas{display:none}.waveform-display-wrapper{position:relative;width:100%;height:100%;max-height:100%;aspect-ratio:1 / 1;margin-inline:auto;flex:1 1 auto;min-height:0;min-width:0;border:1px solid var(--c-border, #dee2e6);border-radius:6px;background:var(--c-surface, #ffffff);overflow:hidden;box-shadow:inset 0 1px 3px #0000001a;transition:all .2s ease;transform:translateZ(0)}.waveform-display-wrapper.live-mode{border-color:var(--c-accent, #4A90E2);box-shadow:inset 0 1px 3px #0000001a,0 0 0 2px #4a90e21a}#static-waveform-canvas{display:block;width:100%;height:100%;cursor:default}.waveform-display-wrapper:after{content:"";position:absolute;top:6px;right:6px;width:8px;height:8px;border-radius:50%;background:#28a745;opacity:0;transition:opacity .3s ease;z-index:10}.waveform-display-wrapper.live-mode:after{opacity:1}@keyframes waveform-pulse{0%,to{box-shadow:inset 0 1px 3px #0000001a,0 0 0 2px #4a90e21a}50%{box-shadow:inset 0 1px 3px #0000001a,0 0 0 2px #4a90e233}}.waveform-display-wrapper.live-mode.pulsing{animation:waveform-pulse 2s ease-in-out infinite}@media(max-width:768px){.waveform-display-wrapper{min-height:80px;height:100%}}@supports (width: 1cqh){.waveform-display-wrapper{max-width:min(100%,200cqh)}}@media(prefers-color-scheme:dark){.waveform-display-wrapper{background:var(--c-surface-dark, #2d3748);border-color:var(--c-border-dark, #4a5568)}.waveform-display-wrapper.live-mode{border-color:var(--c-accent, #4A90E2);box-shadow:inset 0 1px 3px #0003,0 0 0 2px #4a90e226}}.waveform-display-wrapper:not(.live-mode){background-image:linear-gradient(90deg,rgba(0,0,0,.02) 1px,transparent 1px),linear-gradient(rgba(0,0,0,.02) 1px,transparent 1px);background-size:20px 10px;background-position:0 0,0 0}.waveform-display-wrapper *{transition:opacity .2s ease}#static-waveform-canvas.loading{opacity:.5;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:loading-shimmer 1.5s infinite}@keyframes loading-shimmer{0%{background-position:-200% 0}to{background-position:200% 0}}@media(prefers-contrast:high){.waveform-display-wrapper{border-width:2px;border-color:#000}.waveform-display-wrapper.live-mode{border-color:#06c;box-shadow:0 0 0 3px #0066cc4d}}.waveform-speed-controls{position:absolute;top:3px;right:3px;display:flex;gap:2px;z-index:20}.waveform-speed-btn{padding:var(--space-005);font-size:.6rem;font-weight:500;background-color:var(--c-surface);color:var(--c-text);border:1px solid var(--c-border);border-radius:var(--border-radius-sm);cursor:pointer;transition:all .2s ease;min-width:24px;text-align:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.waveform-speed-btn:hover{background-color:var(--c-border)}.waveform-speed-btn.active{background-color:var(--c-accent-neutral-light, #ffd54f)!important;color:var(--c-text, #212529)!important;border-color:var(--c-accent-neutral, #ffc107)!important;font-weight:600!important;box-shadow:0 0 0 1px var(--c-accent-neutral, #ffc107)!important;transform:scale(.98)!important}.waveform-speed-btn.active:hover{background-color:var(--c-accent-neutral-light, #ffd54f)!important;color:var(--c-text, #212529)!important;border-color:var(--c-accent-neutral, #ffc107)!important}.waveform-speed-controls{opacity:1;pointer-events:auto}@media(prefers-color-scheme:dark){.waveform-speed-btn,.waveform-toggle-btn{background-color:var(--c-surface-dark, #2d3748);border-color:var(--c-border-dark, #4a5568);color:var(--c-text-dark, #e2e8f0)}.waveform-speed-btn:hover,.waveform-toggle-btn:hover{background-color:var(--c-border-dark, #4a5568)}}@media(prefers-reduced-motion:reduce){.waveform-display-wrapper,.waveform-display-wrapper:after,.waveform-display-wrapper *,.waveform-speed-btn{transition:none;animation:none}}.time-signature-label{cursor:pointer;padding:2px 6px;border-radius:var(--border-radius-sm);transition:background-color .2s ease}.time-signature-label:hover{background-color:var(--c-gridline)}.time-signature-dropdown{position:fixed;background-color:var(--c-surface);border:1px solid var(--c-border);border-radius:var(--border-radius-md);box-shadow:var(--box-shadow-md);z-index:1000;max-width:300px;max-height:400px;overflow-y:auto;padding:var(--space-025)}.time-signature-dropdown.hidden{display:none}.dropdown-category{margin-bottom:var(--space-035)}.dropdown-category:last-child{margin-bottom:0}.dropdown-category-header{font-size:var(--font-size-sm);font-weight:600;color:var(--c-text-muted);text-transform:uppercase;letter-spacing:.5px;margin-bottom:var(--space-025);padding-bottom:var(--space-015);border-bottom:1px solid var(--c-gridline)}.dropdown-option{display:flex;flex-direction:column;padding:var(--space-025);cursor:pointer;border-radius:var(--border-radius-sm);transition:background-color .2s ease;margin-bottom:var(--space-015)}.dropdown-option:hover{background-color:var(--c-gridline)}.dropdown-option:last-child{margin-bottom:0}.dropdown-label{font-weight:600;font-size:var(--font-size-base);color:var(--c-text)}.dropdown-description{font-size:var(--font-size-sm);color:var(--c-text-muted);margin-top:2px}:root{--buttonGrid-ui-button-size: 1.25rem;--buttonGrid-ui-button-font-size: var(--font-size-sm);--buttonGrid-boundary-color: #3a3a3a}#canvas-macrobeat-tools{position:relative;display:flex;flex-direction:column;flex-shrink:0;margin-block-end:var(--space-015);gap:var(--space-015)}#canvas-macrobeat-tools #accidental-controls-container-v2{position:absolute;right:100%;top:50%;transform:translateY(-50%);z-index:10;margin-right:var(--space-015)}#beat-line-ui{position:relative;display:flex;flex-direction:column;gap:var(--space-015);min-height:2.25rem}#beat-line-button-layer{position:relative;min-height:2.25rem;width:100%}.buttonGrid-ui-button{--buttonGrid-ui-button-width: var(--buttonGrid-ui-button-size);--buttonGrid-ui-button-height: var(--buttonGrid-ui-button-size);--buttonGrid-ui-button-radius: 999px;background-color:var(--c-surface-overlay);color:var(--c-text);border:1px solid var(--c-border);width:var(--buttonGrid-ui-button-width);height:var(--buttonGrid-ui-button-height);border-radius:var(--buttonGrid-ui-button-radius);font-size:var(--buttonGrid-ui-button-font-size);font-weight:600;display:inline-flex;align-items:center;justify-content:center;padding:0;line-height:1;position:absolute;transform:translate(-50%,-50%);z-index:10;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);transition:background-color .2s ease,border-color .2s ease,color .2s ease,transform .1s ease}.buttonGrid-ui-button:not(.buttonGrid-ui-button--boundary):hover,.buttonGrid-ui-button:not(.buttonGrid-ui-button--boundary):focus-visible{background-color:var(--c-surface);border-color:var(--c-text);color:var(--c-text);outline:none}.buttonGrid-ui-button:active{transform:translate(-50%) scale(.95)}.buttonGrid-ui-button--boundary{background-color:transparent;border:none;padding:0;width:var(--buttonGrid-ui-button-width);height:var(--buttonGrid-ui-button-height);align-items:center;justify-content:center;pointer-events:auto;-webkit-backdrop-filter:none;backdrop-filter:none;position:absolute;bottom:0;transform:translate(-50%)}.buttonGrid-ui-button--boundary:hover,.buttonGrid-ui-button--boundary:focus-visible{background-color:transparent;border:none;color:inherit}.buttonGrid-ui-button--boundary:focus-visible{outline:2px solid var(--c-accent);outline-offset:2px}.boundary-diamond{width:80%;height:80%;aspect-ratio:1;display:block;transform:rotate(45deg);border:1.5px solid var(--buttonGrid-boundary-color);border-radius:2px;box-sizing:border-box;background-color:transparent;transition:border-color .2s ease,background-color .2s ease}.boundary-diamond[data-style=solid]{background-color:var(--buttonGrid-boundary-color);border-color:var(--buttonGrid-boundary-color)}.boundary-diamond[data-style=dashed]{background-color:transparent}.boundary-diamond[data-style=anacrusis]{border-color:var(--c-anacrusis-border);background-color:var(--c-anacrusis-bg)}.buttonGrid-ui-button--boundary:hover .boundary-diamond,.buttonGrid-ui-button--boundary:focus-visible .boundary-diamond{border-color:var(--c-accent)}.grouping-segment{position:absolute;top:0;bottom:0;display:flex;align-items:center;justify-content:center;border:none;background-color:transparent;color:var(--c-text);font-weight:600;line-height:1;cursor:pointer;padding:0;transition:background-color .2s ease,color .2s ease}.grouping-segment:hover,.grouping-segment:focus-visible{background-color:var(--c-surface-overlay);color:var(--c-text);outline:none}.grouping-segment:focus-visible{box-shadow:0 0 0 2px rgba(var(--c-accent-rgb),.35)}.grouping-segment[data-next-boundary-style=solid]:after,.grouping-segment[data-next-boundary-style=dashed]:after{content:"";position:absolute;top:0;bottom:0;right:0;border-right:2px solid var(--buttonGrid-boundary-color)}.grouping-segment[data-next-boundary-style=dashed]:after{border-right-style:dashed}.grouping-segment[data-next-boundary-style=anacrusis]:after{border-right:2px dashed var(--c-anacrusis-border)}.grouping-segment[data-has-left-divider=true]:before{content:"";position:absolute;top:0;bottom:0;left:0;border-left:2px solid var(--buttonGrid-boundary-color)}.grouping-segment[data-prev-boundary-style=dashed][data-has-left-divider=true]:before{border-left-style:dashed}.grouping-segment[data-prev-boundary-style=anacrusis][data-has-left-divider=true]:before{border-left:2px dashed var(--c-anacrusis-border)}.macrobeat-adjust-group{display:flex;gap:var(--space-025);justify-content:center}.time-signature-label{background:var(--c-surface-overlay);border-radius:12px;font-weight:700;font-size:var(--buttonGrid-ui-button-font-size);color:var(--c-text-muted);-webkit-user-select:none;user-select:none;position:absolute;transform:translate(-50%);top:var(--time-sig-vertical-offset, .25rem);-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);border:2px solid var(--c-border);padding:.125rem .375rem;cursor:pointer}.time-signature-label.anacrusis-label{color:var(--c-anacrusis-accent);border-color:var(--c-anacrusis-border);background-color:var(--c-anacrusis-bg)}.time-signature-bracket{pointer-events:none;z-index:5}.bracket-label{font-weight:700;font-size:.85em;color:var(--c-text-muted);-webkit-user-select:none;user-select:none;pointer-events:none;white-space:nowrap}.accidental-btn{background-color:var(--c-surface)!important;border:2px solid var(--c-border)!important;color:var(--c-text-muted)!important;font-size:clamp(.85rem,1.8vw,1.125rem);font-weight:600;box-sizing:border-box;flex:1 1 auto;width:100%;height:100%;min-height:0;border-radius:var(--border-radius-sm);cursor:pointer;text-align:center;display:flex;align-items:center;justify-content:center;padding:clamp(.15rem,.4vw,.35rem);-webkit-user-select:none;user-select:none;transition:background-color .15s ease,border-color .15s ease,opacity .15s ease;opacity:.5!important;outline:none}.accidental-btn.accidental-btn--disabled{background-color:var(--c-surface-muted)!important;border-color:var(--c-border)!important;color:var(--c-text-muted)!important;opacity:.35!important;box-shadow:none!important;cursor:default;pointer-events:none}.accidental-btn.accidental-btn--disabled.active{background-color:var(--c-surface-muted)!important;color:var(--c-text-muted)!important;border-color:var(--c-border)!important;box-shadow:none!important;opacity:.35!important;pointer-events:none;cursor:default}.accidental-btn.accidental-btn--disabled:hover{filter:none}.accidental-btn.active{background-color:var(--c-accent-general)!important;color:var(--c-text)!important;border-color:var(--c-accent-general)!important;opacity:1!important;box-shadow:0 2px 4px #0003!important}.accidental-btn:not(.active):hover{background-color:#e3f2fd;border-color:#90caf9;opacity:.7}.accidental-btn.active:hover{filter:brightness(.95)}.octave-toggle-btn .octave-label{display:inline-flex;align-items:center;gap:.1em;white-space:nowrap}.octave-toggle-btn .octave-digit{font-weight:600;transition:opacity .15s ease,color .15s ease;display:inline-block}.octave-toggle-btn:not(.active) .octave-digit{opacity:.4}#note-bank-container{--note-size-max: clamp(18px, 3vw, 28px);--note-size: var(--note-size-max);display:grid;grid-template-rows:repeat(4,minmax(0,1fr));grid-auto-rows:minmax(0,1fr);gap:var(--space-030);align-content:stretch;justify-items:stretch;min-height:0;height:100%;max-height:100%;align-self:stretch}.note-bank-column{display:contents}.note-pair{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:var(--space-020);place-items:center;height:100%;min-height:0;box-sizing:border-box;--note-size: min( var(--note-size-max), calc(100% - 4px) );border-radius:var(--border-radius-md);border:2px solid transparent;background-color:transparent;min-width:0}.note{display:inline-flex;align-items:center;justify-content:center;inline-size:var(--note-size);max-inline-size:var(--note-size);block-size:var(--note-size);max-block-size:var(--note-size);aspect-ratio:1 / 1;margin:0;cursor:pointer;border-radius:50%;transition:transform .2s;background-color:transparent;border:4px solid var(--note-color);color:var(--note-color);box-sizing:border-box;line-height:1}.note:hover{transform:scale(1.05)}.oval-note{aspect-ratio:.7 / 1;block-size:100%;inline-size:auto;max-inline-size:100%;justify-self:center}.diamond-note{border:0;border-radius:0;background:none;padding:0;aspect-ratio:1 / 1;inline-size:var(--note-size);block-size:var(--note-size);max-inline-size:var(--note-size);max-block-size:var(--note-size);min-width:0;min-height:0;box-sizing:border-box}.note.diamond-note.selected{background-color:transparent}.diamond-icon{width:100%;height:100%;display:block}.diamond-icon path{fill:none;stroke:currentColor;stroke-width:8;stroke-linejoin:round;stroke-linecap:round}.note-pair[data-color="#4a90e2"] .note{--note-color: #4a90e2}.note-pair[data-color="#2d2d2d"] .note{--note-color: #2d2d2d}.note-pair[data-color="#d66573"] .note{--note-color: #d66573}.note-pair[data-color="#68a03f"] .note{--note-color: #68a03f}.note[data-color="#4a90e2"]{--note-color: #4a90e2}.note[data-color="#2d2d2d"]{--note-color: #2d2d2d}.note[data-color="#d66573"]{--note-color: #d66573}.note[data-color="#68a03f"]{--note-color: #68a03f}.eraser-icon{width:100%;height:100%;object-fit:contain}.note.diamond-note.selected .diamond-icon path{fill:currentColor}.sidebar-button-text{font-size:1rem;color:var(--c-text);font-weight:600;white-space:nowrap}.toolkit-button{line-height:1.2;padding:var(--space-025)}.toolkit-button--ghost{background-color:var(--c-surface);color:var(--c-text);border:1px solid var(--c-border);transition:background-color .1s ease,border-color .1s ease,transform .1s ease}.toolkit-button--ghost:hover,.toolkit-button--ghost:focus-visible{background-color:var(--c-border);border-color:var(--c-border-strong);color:var(--c-text);outline:none}.toolkit-button--ghost:active{background-color:var(--c-warning);border-color:var(--c-warning);transform:scale(.95)}.toolkit-icon-button{font-size:var(--font-size-sm);inline-size:100%;block-size:100%;max-inline-size:100%;max-block-size:100%;aspect-ratio:1 / 1;display:inline-flex;align-items:center;justify-content:center;padding:0;background-color:transparent;border:1px solid transparent;color:var(--c-text-muted);border-radius:22%;transition:background-color .2s ease,transform .1s ease,border-color .2s ease;position:relative;flex:0 0 auto}.toolkit-icon-button img{width:100%;height:100%;object-fit:contain;pointer-events:none;transition:background-color .2s,transform .1s ease}.toolkit-icon-button:hover{background-color:var(--c-surface-muted);border-color:transparent}.toolkit-icon-button:focus{background-color:var(--c-surface-muted);border-color:transparent;outline:none}.toolkit-icon-button:active{transform:scale(.92);transition-duration:.05s;background-color:var(--c-warning);border-color:transparent}#undo-button:hover,#redo-button:hover,#undo-button:focus,#redo-button:focus{background-color:#00000014}.playback-row{display:grid;grid-auto-flow:column;gap:var(--space-050)}.preset-effects-container{display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-start;flex:0 1 auto;width:auto;max-width:100%;min-width:0;gap:0;box-sizing:border-box}.preset-effects-split{display:flex;flex-direction:row;gap:var(--space-2);width:100%;height:100%;align-items:stretch}.waveform-section{flex:0 0 auto;display:flex;flex-direction:column;align-items:stretch;justify-content:flex-start;min-height:0;height:100%;max-height:100%;width:var(--toolbar-block-size);gap:0}.waveform-tab-button{cursor:default!important;pointer-events:none;border-bottom:none!important;border-bottom-left-radius:0!important;border-bottom-right-radius:0!important;width:100%;flex-shrink:0}.waveform-tab-button:disabled{opacity:1;background-color:var(--c-surface);color:var(--c-text);font-weight:600;border-color:var(--c-border)}#timbre-panel .preset-effects-container{display:inline-flex;align-items:flex-start;flex:0 1 auto;width:max-content;max-width:100%;min-width:0;height:100%;min-height:0}#timbre-panel .preset-effects-controls{flex:1 1 auto;display:flex;flex-direction:column;align-items:flex-start;width:max-content;max-width:100%;min-width:0;min-height:0;height:100%;max-height:100%;overflow:hidden}.preset-effects-tabs{display:flex;gap:0;width:fit-content;align-self:flex-start;margin-bottom:calc(-1 * var(--space-005));min-height:var(--preset-tab-rail-height);align-items:stretch;position:relative;z-index:1}.preset-tab-button{padding:var(--space-015) var(--space-035);background-color:var(--c-surface-muted);border:1px solid var(--c-border);border-bottom:none;color:var(--c-text-muted);font-family:var(--main-font);font-size:var(--font-size-sm);font-weight:500;cursor:pointer;text-align:center;transition:all .2s ease;position:relative;border-top-left-radius:var(--border-radius-md);border-top-right-radius:var(--border-radius-md);border-bottom-left-radius:0;border-bottom-right-radius:0;height:var(--preset-tab-rail-height);display:flex;align-items:center;justify-content:center;line-height:1.2;white-space:nowrap}.preset-tab-button+.preset-tab-button{margin-left:-1px}.preset-tab-button:hover{background-color:var(--c-surface);color:var(--c-text)}.preset-tab-button.active{background-color:var(--c-surface);color:var(--c-text);font-weight:600;border-color:var(--c-border);border-bottom-color:transparent;z-index:2;margin-bottom:-1px}.preset-effects-content{position:relative;width:100%;height:100%;margin:0;padding:0;display:flex;flex-direction:column;overflow:hidden;min-height:0;min-width:0;flex:1 1 auto}.preset-effects-content:has(#effects-panel.preset-tab-panel.active){width:fit-content;max-width:100%;align-self:flex-start;flex:1 1 auto;height:100%}#timbre-panel .preset-effects-container:has(#effects-panel.preset-tab-panel.active){flex:0 0 auto;width:fit-content;max-width:100%;height:100%}#timbre-panel .preset-effects-controls:has(#effects-panel.preset-tab-panel.active){flex:0 0 auto;height:100%;width:fit-content;max-width:100%}.preset-tab-panel{display:none}.preset-tab-panel.active{display:flex;flex-direction:column;width:100%;height:100%;min-height:0;overflow:hidden}#presets-panel.preset-tab-panel.active{width:max-content;max-width:100%;align-self:flex-start}#effects-panel.preset-tab-panel.active{width:fit-content;max-width:100%;align-self:flex-start;height:100%;min-height:0}.preset-content-box,.effects-content-box{background-color:var(--c-surface);border:1px solid var(--c-border);border-radius:var(--border-radius-md);padding:clamp(.25rem,1dvh,var(--space-2));box-shadow:var(--box-shadow-sm);position:relative;z-index:1;min-width:0;width:fit-content;max-width:100%;overflow:visible;flex:0 0 auto;height:100%;box-sizing:border-box;display:flex;flex-direction:column;align-items:center;justify-content:center}.preset-content-box{width:100%;max-width:100%}#presets-panel .preset-content-box{width:max-content;max-width:100%;align-items:flex-start}.waveform-content-box{background-color:var(--c-surface);border:1px solid var(--c-border);border-radius:var(--border-radius-md);padding:var(--space-2);box-shadow:var(--box-shadow-sm);position:relative;z-index:1;width:100%;max-width:100%;min-width:fit-content;overflow:hidden;flex:1;box-sizing:border-box;display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:0;max-height:100%;container-type:size}.preset-tab-panel.active[id=presets-panel] .preset-content-box{border-top-left-radius:0}.preset-tab-panel.active[id=effects-panel] .effects-content-box{border-top-right-radius:0}.effects-content-box{width:fit-content;max-width:100%;height:100%;min-height:0;max-height:100%;flex:1 1 auto;align-items:stretch;justify-content:stretch}.preset-tab-panel.active[id=presets-panel] .preset-content-box:before{content:"";position:absolute;top:-1px;left:calc(50% - 35px);width:70px;height:1px;background-color:var(--c-surface);z-index:3}.preset-tab-panel.active[id=effects-panel] .effects-content-box:before{content:"";position:absolute;top:-1px;left:calc(50% - 35px);width:70px;height:1px;background-color:var(--c-surface);z-index:3}.preset-grid{display:flex;flex-direction:row;gap:clamp(.125rem,.5dvh,var(--space-1));width:100%;height:100%;min-height:0;max-height:100%;justify-content:flex-start;align-items:stretch}#presets-panel .preset-grid{width:max-content}.preset-column{display:flex;flex-direction:column;gap:clamp(.125rem,.5dvh,var(--space-1));flex:1 1 auto;min-width:fit-content;height:100%;min-height:0;align-items:stretch;justify-content:space-evenly;container-type:inline-size}#presets-panel .preset-column{flex:0 0 auto;width:max-content;min-width:clamp(6.5rem,12ch,10.5rem);height:100%;justify-content:stretch}#presets-panel .preset-button{min-width:100%;flex:1 1 0;height:auto;min-height:0;font-size:clamp(.7rem,1.5dvh,1rem)}.preset-button{width:100%;min-width:max-content;justify-content:center;display:flex;align-items:center;padding:clamp(.2rem,.5dvh,.5rem) clamp(.25rem,.5dvw,.5rem);height:clamp(1.5rem,3.5dvh,3rem);min-height:0;font-size:clamp(.65rem,1.2dvh,.85rem);background-color:var(--c-surface);color:var(--c-text);border:1px solid var(--c-border);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;box-sizing:border-box;container-type:inline-size}.preset-button:hover{background-color:var(--c-border)}.preset-effects-container .preset-button.selected{background-color:var(--c-accent-light, #63a9fd)!important;color:var(--c-text, #212529)!important;border-color:var(--c-accent, #4A90E2)!important;font-weight:600!important;box-shadow:0 0 0 1px var(--c-accent, #4A90E2)!important;transform:scale(.98)!important;opacity:1!important}.effects-grid{display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:repeat(2,1fr);row-gap:.15rem;column-gap:.15rem;margin-bottom:0}.effect-button{width:4.5rem;justify-content:center;display:flex;align-items:center;padding:.1rem;background-color:var(--c-surface);color:var(--c-text);border:1px solid var(--c-border);border-radius:var(--border-radius-sm);font-size:13px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;transition:background-color .2s ease}.effect-button:hover{background-color:var(--c-border)}.effect-button.active{background-color:var(--c-accent-light, #63a9fd);color:var(--c-text, #212529);border-color:var(--c-accent, #4A90E2);font-weight:600;box-shadow:0 0 0 2px var(--c-accent, rgba(74, 144, 226, .2));transform:scale(.98)}.effect-controls-container{padding-top:.15rem;margin-top:0rem;min-height:2rem;display:none}.effect-controls-container.active{display:block;min-height:auto;height:fit-content}.effect-controls{display:grid;grid-template-columns:repeat(auto-fit,minmax(80px,1fr));gap:var(--space-3);align-items:start;justify-items:center;padding:var(--space-2) 0}.effect-control-group{display:flex;flex-direction:column;gap:var(--space-1);align-items:center;min-width:80px;position:relative}.effect-control-label{font-size:.5rem;color:var(--c-text-muted);text-transform:uppercase;letter-spacing:.5px;font-weight:500}.effect-control-slider{width:100%;height:4px;background:var(--c-border);border-radius:2px;outline:none;-webkit-appearance:none;appearance:none}.effect-control-slider::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:16px;height:16px;border-radius:50%;background:var(--c-accent);cursor:pointer;border:2px solid var(--c-surface);box-shadow:0 2px 4px #0003}.effect-control-slider::-moz-range-thumb{width:16px;height:16px;border-radius:50%;background:var(--c-accent);cursor:pointer;border:2px solid var(--c-surface);box-shadow:0 2px 4px #0003}.effect-control-value{font-size:.75rem;color:var(--c-text);font-weight:600;min-width:30px;text-align:center}#accidental-controls-container-v2{display:flex;justify-content:center;gap:var(--space-025)}.pitch-tabs-container{display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-start;flex:1 1 auto;width:100%;min-width:0;gap:0;height:100%;--c-accent: var(--c-accent-neutral, #ffc107);--c-accent-light: var(--c-accent-neutral-light, #ffd54f);--harmony-partial-bg: rgba(var(--c-accent-neutral-rgb, 255, 193, 7), .25);--harmony-partial-border: rgba(var(--c-accent-neutral-rgb, 255, 193, 7), .4);--harmony-partial-bg-hover: rgba(var(--c-accent-neutral-rgb, 255, 193, 7), .4);--harmony-partial-border-hover: rgba(var(--c-accent-neutral-rgb, 255, 193, 7), .6)}.pitch-tabs{display:flex;gap:0;margin-bottom:calc(-1 * var(--space-005));position:relative;z-index:1}.pitch-tab-button{padding:var(--space-015) var(--space-035);background-color:var(--c-surface-muted);border:1px solid var(--c-border);border-bottom:none;color:var(--c-text-muted);font-family:var(--main-font);font-size:.875rem;font-weight:500;cursor:pointer;text-align:center;transition:all .2s ease;position:relative;border-top-left-radius:var(--border-radius-md);border-top-right-radius:var(--border-radius-md);border-bottom-left-radius:0;border-bottom-right-radius:0}.pitch-tab-button+.pitch-tab-button{margin-left:-1px}.pitch-tab-button:hover{background-color:var(--c-border);color:var(--c-text)}.pitch-tab-button.active{background-color:var(--c-surface);color:var(--c-text);font-weight:600;border-color:var(--c-border);border-bottom-color:transparent;z-index:2;margin-bottom:-1px}.pitch-tab-content{position:relative;width:100%;flex:1;min-height:0;display:flex;flex-direction:column}.pitch-tab-panel{display:none}.pitch-tab-panel.active{display:flex;flex-direction:column;flex:1;min-height:0;height:100%}.intervals-content-box,.chords-content-box,.tonic-content-box{background-color:var(--c-surface);border:1px solid var(--c-border);border-radius:var(--border-radius-md);padding:clamp(.25rem,1dvh,var(--space-015));box-shadow:var(--box-shadow-sm);position:relative;z-index:1;width:100%;flex:1;min-height:0;display:flex;flex-direction:column;overflow:hidden}.pitch-tab-panel.active .intervals-content-box:before{content:"";position:absolute;top:-1px;left:calc(50% - 50px);width:60px;height:1px;background-color:transparent;z-index:3}.pitch-tab-panel.active .chords-content-box:before{content:"";position:absolute;top:-1px;left:calc(50% + 10px);width:50px;height:1px;background-color:transparent;z-index:3}.harmony-preset-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:clamp(.125rem,.5dvh,var(--space-015));flex:1;grid-auto-rows:1fr;align-content:stretch;min-height:0;height:100%}.harmony-preset-grid.chords-grid-6col{grid-template-columns:repeat(6,1fr);grid-auto-rows:1fr;gap:clamp(2px,.3dvh,var(--space-015))}.harmony-preset-button{background-color:transparent;color:var(--c-text);border:1px solid var(--c-border);border-radius:var(--border-radius-sm);font-size:clamp(14px,2.4dvh,22px);font-weight:700;min-height:clamp(28px,3.5dvh,40px);padding:clamp(2px,.3dvh,4px);line-height:1.1}.chords-grid-6col .harmony-preset-button{font-size:clamp(14px,2.4dvh,18px);min-height:clamp(20px,2.5dvh,32px);padding:clamp(1px,.2dvh,2px) clamp(2px,.3dvw,4px)}.intervals-layout{display:flex;gap:var(--space-025);align-items:flex-start}.intervals-panel-section{display:flex;flex-direction:column;gap:0;align-items:flex-start}.intervals-panel-section.inversion-section{flex:0 0 auto}.intervals-panel-section.intervals-grid-section{flex:1}.inversion-column{display:flex;flex-direction:column;align-items:flex-start;gap:var(--space-025);flex:0 0 auto}.toggle-switch{width:20px;height:40px;background:linear-gradient(180deg,var(--c-gridline) 0%,var(--c-border) 100%);border:1px solid var(--c-border-strong);border-radius:10px;position:relative;cursor:pointer;transition:background .3s ease,border-color .3s ease}.toggle-switch.active{background:linear-gradient(180deg,var(--c-accent-neutral-light) 0%,var(--c-accent-neutral) 100%);border-color:var(--c-accent-neutral)}.toggle-slider{width:16px;height:16px;background-color:var(--c-surface);border:2px solid var(--c-border-strong);border-radius:50%;position:absolute;top:2px;left:2px;transition:transform .3s ease,background-color .3s ease,border-color .3s ease;box-shadow:0 2px 4px #0003}.toggle-switch.active .toggle-slider{transform:translateY(20px)}.chords-layout{display:flex;gap:clamp(.125rem,.5dvw,var(--space-025));align-items:stretch;flex:1;min-height:0;height:100%}.chords-panel-section{display:flex;flex-direction:column;gap:var(--space-015);align-items:flex-start;min-height:0;height:100%;align-self:stretch}#chords-panel .panel-section-title{display:none}.chords-panel-section>.panel-section-title{flex:0 0 auto}.chords-panel-section>:not(.panel-section-title){flex:1 1 0;min-height:0}.chords-panel-section.intervals-grid-section{flex:0 0 auto}.chords-panel-section.chords-grid-section{flex:1;min-height:0}.chord-inversion-column{display:flex;flex-direction:column;align-items:flex-start;gap:var(--space-015);flex:0 0 auto;text-align:left}.three-state-toggle{width:20px;height:60px;background-color:var(--c-border);border-radius:10px;position:relative;cursor:pointer;transition:background-color .3s ease}.three-state-toggle.state-1,.three-state-toggle.state-2{background-color:var(--c-border)}.three-state-slider{width:16px;height:16px;background-color:transparent;border-radius:50%;position:absolute;top:2px;left:2px;transition:transform .3s ease;box-shadow:0 1px 3px #0003}.three-state-toggle.state-1 .three-state-slider{transform:translateY(20px)}.three-state-toggle.state-2 .three-state-slider{transform:translateY(40px)}.state-labels{display:flex;flex-direction:column;justify-content:space-between;height:60px;margin-left:var(--space-035);position:absolute;left:100%;top:0;font-size:.6em;color:var(--c-text-muted);text-transform:uppercase;letter-spacing:.3px}.state-label{flex:1;display:flex;align-items:center;justify-content:flex-start;height:20px}.four-state-toggle{width:20px;height:80px;background-color:var(--c-border);border-radius:10px;position:relative;cursor:pointer;transition:background-color .3s ease}.four-state-toggle.state-1,.four-state-toggle.state-2,.four-state-toggle.state-3{background-color:var(--c-border)}.four-state-slider{width:16px;height:16px;background-color:transparent;border-radius:50%;position:absolute;top:2px;left:2px;transition:transform .3s ease;box-shadow:0 1px 3px #0003}.four-state-toggle.state-1 .four-state-slider{transform:translateY(20px)}.four-state-toggle.state-2 .four-state-slider{transform:translateY(40px)}.four-state-toggle.state-3 .four-state-slider{transform:translateY(60px)}.state-labels-4{display:flex;flex-direction:column;justify-content:space-between;height:80px;margin-left:var(--space-035);position:absolute;left:100%;top:0;font-size:.6em;color:var(--c-text-muted);text-transform:uppercase;letter-spacing:.3px}.state-labels-4 .state-label{flex:1;display:flex;align-items:center;justify-content:flex-start;height:20px}.five-state-toggle{width:20px;height:100px;background-color:var(--c-border);border-radius:10px;position:relative;cursor:pointer;transition:background-color .3s ease}.five-state-toggle.state-1,.five-state-toggle.state-2,.five-state-toggle.state-3,.five-state-toggle.state-4{background-color:var(--c-border)}.five-state-slider{width:16px;height:16px;background-color:transparent;border-radius:50%;position:absolute;top:2px;left:2px;transition:transform .3s ease;box-shadow:0 1px 3px #0003}.five-state-toggle.state-1 .five-state-slider{transform:translateY(20px)}.five-state-toggle.state-2 .five-state-slider{transform:translateY(40px)}.five-state-toggle.state-3 .five-state-slider{transform:translateY(60px)}.five-state-toggle.state-4 .five-state-slider{transform:translateY(80px)}.state-labels-5{display:flex;flex-direction:column;justify-content:space-between;height:100px;margin-left:var(--space-035);position:absolute;left:100%;top:0;font-size:.6em;color:var(--c-text-muted);text-transform:uppercase;letter-spacing:.3px}.state-labels-5 .state-label{flex:1;display:flex;align-items:center;justify-content:flex-start;height:20px}.six-state-toggle{width:20px;height:120px;background:linear-gradient(180deg,var(--c-gridline) 0%,var(--c-border) 100%);border:1px solid var(--c-border-strong);border-radius:10px;position:relative;cursor:pointer;transition:background .3s ease,border-color .3s ease}.six-state-toggle.state-1{background:linear-gradient(180deg,var(--c-accent-neutral-light) 0%,var(--c-accent-neutral) 16.67%,var(--c-border) 33.33%,var(--c-gridline) 100%);border-color:var(--c-accent-neutral)}.six-state-toggle.state-2{background:linear-gradient(180deg,var(--c-accent-neutral-light) 0%,var(--c-accent-neutral) 33.33%,var(--c-border) 50%,var(--c-gridline) 100%);border-color:var(--c-accent-neutral)}.six-state-toggle.state-3{background:linear-gradient(180deg,var(--c-accent-neutral-light) 0%,var(--c-accent-neutral) 50%,var(--c-border) 66.67%,var(--c-gridline) 100%);border-color:var(--c-accent-neutral)}.six-state-toggle.state-4{background:linear-gradient(180deg,var(--c-accent-neutral-light) 0%,var(--c-accent-neutral) 66.67%,var(--c-border) 83.33%,var(--c-gridline) 100%);border-color:var(--c-accent-neutral)}.six-state-toggle.state-5{background:linear-gradient(180deg,var(--c-accent-neutral-light) 0%,var(--c-accent-neutral) 83.33%,var(--c-border) 91.67%,var(--c-gridline) 100%);border-color:var(--c-accent-neutral)}.six-state-slider{width:16px;height:16px;background-color:var(--c-surface);border:2px solid var(--c-border-strong);border-radius:50%;position:absolute;top:2px;left:2px;transition:transform .3s ease,background-color .3s ease,border-color .3s ease;box-shadow:0 2px 4px #0003}.six-state-toggle.state-1 .six-state-slider{transform:translateY(20px)}.six-state-toggle.state-2 .six-state-slider{transform:translateY(40px)}.six-state-toggle.state-3 .six-state-slider{transform:translateY(60px)}.six-state-toggle.state-4 .six-state-slider{transform:translateY(80px)}.six-state-toggle.state-5 .six-state-slider{transform:translateY(100px)}.state-labels-6{display:flex;flex-direction:column;justify-content:space-between;height:120px;margin-left:var(--space-035);position:absolute;left:100%;top:0;font-size:.6em;color:var(--c-text-muted);text-transform:uppercase;letter-spacing:.3px}.state-labels-6 .state-label{flex:1;display:flex;align-items:center;justify-content:flex-start;height:20px}.six-state-toggle.disabled-state-3 .state-labels-6 .state-label:nth-child(4),.six-state-toggle.disabled-state-4 .state-labels-6 .state-label:nth-child(5),.six-state-toggle.disabled-state-5 .state-labels-6 .state-label:nth-child(6){opacity:.3;pointer-events:none}.unified-position-section{flex:0 0 auto;min-height:0;height:100%}.unified-position-section .panel-section-title{text-align:center}.unified-position-column{display:flex;flex-direction:column;align-items:stretch;gap:var(--space-015);flex:1 1 0;min-height:0;height:100%}.unified-position-toggle{display:grid;grid-template-columns:auto auto auto;align-items:stretch;gap:var(--space-035);position:relative;height:100%;min-height:0}.unified-position-toggle .toggle-track{width:20px;height:100%;background:linear-gradient(180deg,var(--c-gridline) 0%,var(--c-border) 100%);border:1px solid var(--c-border-strong);border-radius:10px;position:relative;cursor:pointer;transition:background .3s ease,border-color .3s ease;flex-shrink:0;min-height:0;display:grid;grid-template-rows:repeat(6,minmax(0,1fr));align-items:center;justify-items:center}.unified-slider{width:16px;height:16px;background-color:var(--c-surface);border:2px solid var(--c-border-strong);border-radius:50%;position:static;transition:background-color .3s ease,border-color .3s ease;box-shadow:0 2px 4px #0003;z-index:1;grid-row:1}.unified-position-toggle.state-1 .unified-slider{grid-row:2}.unified-position-toggle.state-2 .unified-slider{grid-row:3}.unified-position-toggle.state-3 .unified-slider{grid-row:4}.unified-position-toggle.state-4 .unified-slider{grid-row:5}.unified-position-toggle.state-5 .unified-slider{grid-row:6}.unified-position-toggle.state-1 .toggle-track{background:linear-gradient(180deg,var(--c-accent-neutral-light) 0%,var(--c-accent-neutral) 16.67%,var(--c-border) 33.33%,var(--c-gridline) 100%);border-color:var(--c-accent-neutral)}.unified-position-toggle.state-2 .toggle-track{background:linear-gradient(180deg,var(--c-accent-neutral-light) 0%,var(--c-accent-neutral) 33.33%,var(--c-border) 50%,var(--c-gridline) 100%);border-color:var(--c-accent-neutral)}.unified-position-toggle.state-3 .toggle-track{background:linear-gradient(180deg,var(--c-accent-neutral-light) 0%,var(--c-accent-neutral) 50%,var(--c-border) 66.67%,var(--c-gridline) 100%);border-color:var(--c-accent-neutral)}.unified-position-toggle.state-4 .toggle-track{background:linear-gradient(180deg,var(--c-accent-neutral-light) 0%,var(--c-accent-neutral) 66.67%,var(--c-border) 83.33%,var(--c-gridline) 100%);border-color:var(--c-accent-neutral)}.unified-position-toggle.state-5 .toggle-track{background:linear-gradient(180deg,var(--c-accent-neutral-light) 0%,var(--c-accent-neutral) 83.33%,var(--c-border) 91.67%,var(--c-gridline) 100%);border-color:var(--c-accent-neutral)}.unified-position-toggle .left-labels{display:grid;grid-template-rows:repeat(6,minmax(0,1fr));align-items:center;height:100%;min-height:0;font-size:.6em;color:var(--c-text-muted);text-transform:uppercase;letter-spacing:.3px;flex-shrink:0}.unified-position-toggle .left-labels .state-label{display:flex;align-items:center;justify-content:flex-end;cursor:pointer;transition:opacity .2s ease;min-height:0}.unified-position-toggle .right-labels{display:grid;grid-template-rows:repeat(6,minmax(0,1fr));align-items:center;height:100%;min-height:0;font-size:.6em;color:var(--c-text-muted);text-transform:uppercase;letter-spacing:.3px;flex-shrink:0}.unified-position-toggle .right-labels .state-label{display:flex;align-items:center;justify-content:flex-start;cursor:pointer;transition:opacity .2s ease;min-height:0}.unified-position-toggle .left-labels .state-label:nth-child(1){grid-row:1}.unified-position-toggle .left-labels .state-label:nth-child(2){grid-row:2}.unified-position-toggle.position-mode .left-labels .state-label,.unified-position-toggle.inversion-mode .right-labels .state-label{opacity:.3;pointer-events:none}.unified-position-toggle.inversion-mode .left-labels .state-label{opacity:1;pointer-events:auto}.unified-position-toggle.disabled-state-1 .right-labels .state-label:nth-child(n+2),.unified-position-toggle.disabled-state-2 .right-labels .state-label:nth-child(n+3),.unified-position-toggle.disabled-state-3 .right-labels .state-label:nth-child(n+4),.unified-position-toggle.disabled-state-4 .right-labels .state-label:nth-child(n+5),.unified-position-toggle.disabled-state-5 .right-labels .state-label:nth-child(n+6){opacity:.3;pointer-events:none}.panel-section-title{margin:0;color:var(--c-text-muted);font-size:clamp(.55rem,1dvh,.75rem);text-transform:uppercase;letter-spacing:.3px;font-weight:600}.hidden{display:none}.intervals-grid-column,.chords-grid-column{flex:1;min-height:0;display:flex;flex-direction:column;height:100%}.intervals-grid-column{width:max-content;max-width:100%}.chords-grid-column .chords-grid{flex:1;min-height:0;height:100%}.intervals-4x4-grid{gap:2px;width:max-content}.intervals-4x4-grid .harmony-preset-button{width:100%;height:100%;min-height:0;display:flex;align-items:center;justify-content:center;padding:0}.harmony-preset-button:hover{background-color:var(--c-border)}.harmony-preset-button:focus{background-color:transparent;color:var(--c-text);outline:none}.harmony-preset-button:focus:hover{background-color:var(--c-border)}.harmony-preset-button.selected:focus{background-color:var(--c-accent);color:var(--c-surface)}.harmony-preset-button.selected{background-color:var(--c-accent-light, #63a9fd);color:var(--c-text, #212529);border-color:var(--c-accent, #4A90E2);font-weight:600}.harmony-preset-button.partial-match{background-color:var(--harmony-partial-bg, rgba(99, 169, 253, .25));color:var(--c-text, #212529);border-color:var(--harmony-partial-border, rgba(74, 144, 226, .4));font-weight:500;opacity:.7}.harmony-preset-button.partial-match:hover{background-color:var(--harmony-partial-bg-hover, rgba(99, 169, 253, .4));border-color:var(--harmony-partial-border-hover, rgba(74, 144, 226, .6));opacity:.85}.rhythm-tab-button{padding:var(--space-015) var(--space-035);background-color:var(--c-surface-muted);border:1px solid var(--c-border);border-bottom:none;color:var(--c-text-muted);font-family:var(--main-font);font-size:.875rem;font-weight:500;cursor:pointer;text-align:center;transition:all .2s ease;position:relative;border-top-left-radius:var(--border-radius-md);border-top-right-radius:var(--border-radius-md);white-space:nowrap}.rhythm-tab-button+.rhythm-tab-button{margin-left:-1px}.rhythm-tab-button:hover{background-color:var(--c-surface);color:var(--c-text)}.rhythm-tab-button.active{background-color:var(--c-surface);color:var(--c-text);font-weight:600;border-color:var(--c-border);border-bottom-color:transparent;z-index:2;margin-bottom:-1px}.sixteenth-stamp-button{position:relative;width:clamp(40px,5dvw,60px);height:clamp(40px,5dvh,60px);min-width:0;min-height:0;background-color:var(--c-surface);border:1px solid var(--c-border);border-radius:var(--border-radius-md);cursor:pointer;transition:all .2s ease;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:0}.sixteenth-stamp-button:hover{background-color:var(--c-gridline);transform:scale(1.05);border-color:var(--c-accent)}.sixteenth-stamp-button.active{background-color:var(--c-accent-light, #63a9fd)!important;color:var(--c-text, #212529)!important;border-color:var(--c-accent, #4A90E2)!important;font-weight:600!important;box-shadow:0 0 0 1px var(--c-accent, #4A90E2)!important;transform:scale(.98)!important;opacity:1!important}.sixteenth-stamp-button svg{flex-shrink:0}.sixteenth-stamp-number{font-size:clamp(.6rem,1dvh,.7rem);font-weight:600;color:var(--c-text-muted);line-height:1}.sixteenth-stamp-button.active .sixteenth-stamp-number{color:var(--c-text)}.triplet-stamp-button{position:relative;width:clamp(32px,4dvw,48px);height:clamp(32px,4dvw,48px);min-width:0;min-height:0;background-color:var(--c-surface);border:1px solid var(--c-border);border-radius:var(--border-radius-md);cursor:pointer;transition:all .2s ease;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:0}.triplet-stamp-button:hover{background-color:var(--c-gridline);transform:scale(1.05);border-color:var(--c-accent)}.triplet-stamp-button.active{background-color:var(--c-accent-light, #63a9fd)!important;color:var(--c-text, #212529)!important;border-color:var(--c-accent, #4A90E2)!important;font-weight:600!important;box-shadow:0 0 0 1px var(--c-accent, #4A90E2)!important;transform:scale(.98)!important;opacity:1!important}.triplet-stamp-button svg{flex-shrink:0;width:100%;height:100%;max-width:100%;max-height:100%}.triplet-stamp-button-wide{width:clamp(64px,8dvw,96px);height:clamp(32px,4dvw,48px);min-width:0;position:relative}.triplet-stamp-button-wide:after{content:"";position:absolute;top:10%;bottom:10%;left:50%;width:1px;border-left:1px dashed var(--c-border);pointer-events:none;z-index:1}.sidebar-toggle-button{flex:1;padding:var(--space-2);text-align:center;background-color:var(--c-surface);color:var(--c-text);border:1px solid var(--c-border);opacity:.6}.sidebar-toggle-button.active{background-color:var(--c-warning);color:var(--c-text);border-color:var(--c-border);opacity:1}.sidebar-toggle-button:not(.active):hover{background-color:var(--c-border)}.macrobeat-adjust-group .toolkit-button{background-color:var(--c-surface);border:1px solid var(--c-border);color:var(--c-text);transition:background-color .1s ease,transform .1s ease}.macrobeat-adjust-group .toolkit-button:hover{background-color:var(--c-border)}.macrobeat-adjust-group .toolkit-button:active{background-color:var(--c-warning);transform:scale(.95);transition:background-color .1s ease,transform .1s ease}.modulation-controls .toolkit-button{font-size:12px;padding:var(--space-1) var(--space-2);background-color:var(--c-surface-muted);border:1px solid var(--c-border);border-radius:var(--border-radius-sm);color:var(--c-text);transition:all .2s ease;cursor:pointer;min-width:50px}.modulation-controls .toolkit-button:hover{background-color:var(--c-accent-neutral-light);border-color:var(--c-accent-neutral);color:var(--c-text)}.modulation-controls .toolkit-button.active{background-color:var(--c-accent-neutral);border-color:var(--c-accent-neutral);color:var(--c-text);font-weight:600}.modulation-ratio-btn[data-ratio="2:3"]:hover,.modulation-ratio-btn[data-ratio="3:2"]:hover{background-color:var(--c-accent-neutral-light);border-color:var(--c-accent-neutral);color:var(--c-text)}input[type=range]{-webkit-appearance:none;appearance:none;width:100%;height:var(--space-025);border-radius:var(--border-radius-sm);background:var(--c-gridline);outline:none;margin-block-start:var(--space-025);margin-block-end:0}#tempo-slider{writing-mode:vertical-lr;direction:rtl;width:var(--slider-track-thickness);max-width:var(--slider-track-thickness);height:100%!important;max-height:none!important;min-height:0;display:block;block-size:100%!important;max-block-size:none!important;min-block-size:0;inline-size:var(--slider-track-thickness);max-inline-size:var(--slider-track-thickness);margin:0 auto;flex:1 1 auto;align-self:stretch;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:var(--c-gridline);border-radius:var(--border-radius-sm);outline:none}.tempo-slider-container{position:relative;display:flex;align-items:stretch;justify-content:center;height:100%}#tempo-slider{position:relative}.tempo-slider-marks{position:absolute;inset-block:var(--space-010);inset-inline:0;pointer-events:none}.tempo-slider-mark{position:absolute;left:50%;width:calc(var(--slider-track-thickness) + var(--space-050));height:1px;background:var(--c-border-strong);opacity:.9;transform:translate(-50%,50%);border-radius:999px}#tempo-slider::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:var(--slider-thumb-size);height:var(--slider-thumb-size);border-radius:50%;background:var(--c-text);border:var(--slider-thumb-border) solid var(--c-surface);cursor:pointer}#tempo-slider::-webkit-slider-thumb:active{background:var(--c-text);border:var(--slider-thumb-border) solid var(--c-surface)}#tempo-slider::-moz-range-thumb{width:var(--slider-thumb-size);height:var(--slider-thumb-size);border-radius:50%;background:var(--c-text);border:var(--slider-thumb-border) solid var(--c-surface);cursor:pointer}#tempo-slider::-moz-range-thumb:active{background:var(--c-text);border:var(--slider-thumb-border) solid var(--c-surface)}#tempo-slider::-moz-range-track{background:var(--c-gridline);border-radius:var(--border-radius-sm);border:none}input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:18px;height:18px;border-radius:50%;background:var(--c-text);border:2px solid var(--c-surface);box-shadow:var(--box-shadow-sm);cursor:pointer}input[type=range]::-moz-range-thumb{width:18px;height:18px;border-radius:50%;background:var(--c-text);border:2px solid var(--c-surface);box-shadow:var(--box-shadow-sm);cursor:pointer}.slider-label{margin-block-start:var(--space-025);color:var(--c-text-muted);text-align:center;-webkit-user-select:none;user-select:none}.note.selected{background-color:var(--note-color, #000)}.note-pair.selected{border-color:var(--note-color)!important;box-shadow:0 0 8px var(--note-color)}.note-pair[data-color="#4a90e2"].selected{--note-color: #4a90e2}.note-pair[data-color="#2d2d2d"].selected{--note-color: #2d2d2d}.note-pair[data-color="#d66573"].selected{--note-color: #d66573}.note-pair[data-color="#68a03f"].selected{--note-color: #68a03f}.toolkit-icon-button.selected,.toolkit-icon-button.active:not(#grid-zoom-in):not(#grid-zoom-out):not(#clear-button):not(#undo-button):not(#redo-button):not(#stop-button):not(#play-button){background-color:var(--c-accent);color:var(--c-surface)}.toolkit-icon-button.selected img,.toolkit-icon-button.active:not(#grid-zoom-in):not(#grid-zoom-out):not(#clear-button):not(#undo-button):not(#redo-button):not(#stop-button):not(#play-button) img{filter:invert(1) brightness(2)}.eraser-button.selected{background-color:var(--c-danger);color:var(--c-surface);box-shadow:none}.eraser-button.selected img{filter:invert(1) brightness(2)}.toolkit-icon-button.selected:hover,.toolkit-icon-button.active:hover{background-color:var(--c-accent-hover);transform:scale(1)}.eraser-button.selected:hover{background-color:#a72836}.eraser-button.erasing-active{background-color:var(--c-danger);color:var(--c-surface);transform:scale(1)}.eraser-button.erasing-active img{filter:invert(1) brightness(2)}.toolkit-icon-button.flash{background-color:#dc35454d;box-shadow:0 0 8px var(--c-danger);animation:clearFlash .3s ease-out}@keyframes clearFlash{0%{background-color:#dc354599;box-shadow:0 0 12px var(--c-danger)}to{background-color:transparent;box-shadow:none}}.preset-button.selected{background-color:var(--c-accent);color:var(--c-surface);border:1px solid var(--c-accent-hover);box-shadow:0 0 5px var(--c-accent)}.preset-button.selected:hover{background-color:var(--c-accent-hover)}#volume-icon-button.active{background-color:var(--c-border)!important;color:var(--c-text)!important}#volume-icon-button.active img{filter:none!important}#volume-icon-button.active:hover{background-color:var(--c-gridline)!important;color:var(--c-text)!important}#clear-button:active,#eraser-tool-button:active{background-color:#dc35454d!important;transform:scale(.92);transition-duration:.05s}#loop-button.active{background-color:var(--c-warning)!important;color:var(--c-text)!important}#loop-button.active img{filter:none!important}#loop-button.active:hover{background-color:#e6ac00!important;color:var(--c-text)!important}.playback-controls.svelte-1sr4oe7{display:flex;align-items:center;gap:4px}.toolbar-button.svelte-1sr4oe7{display:flex;align-items:center;justify-content:center;width:36px;height:36px;padding:6px;border:none;border-radius:4px;background:transparent;cursor:pointer;transition:background-color .15s ease}.toolbar-button.svelte-1sr4oe7:hover:not(:disabled){background-color:#ffffff1a}.toolbar-button.svelte-1sr4oe7:active:not(:disabled){background-color:#fff3}.toolbar-button.svelte-1sr4oe7:disabled{opacity:.4;cursor:not-allowed}.toolbar-button.active.svelte-1sr4oe7{background-color:#6495ed4d}.toolbar-button.svelte-1sr4oe7 img:where(.svelte-1sr4oe7){width:20px;height:20px;filter:brightness(0) invert(1)}.separator.svelte-1sr4oe7{width:1px;height:24px;background-color:#fff3;margin:0 4px}svg.svelte-w1yw4{display:block;cursor:crosshair}svg.svelte-w1yw4:active{cursor:grabbing}.effects-cartesian-slider.svelte-96fy48{width:100%;height:100%;display:block}.notification-overlay.svelte-12566qp{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#0009;display:none;align-items:center;justify-content:center;z-index:10000}.notification-overlay.visible.svelte-12566qp{display:flex}.notification-modal.svelte-12566qp{position:relative;background-color:#2a2a2a;border-radius:8px;padding:24px;min-width:320px;max-width:500px;box-shadow:0 4px 6px #0000004d}.notification-close.svelte-12566qp{position:absolute;top:12px;right:12px;background:none;border:none;font-size:24px;color:#aaa;cursor:pointer;padding:4px 8px;line-height:1}.notification-close.svelte-12566qp:hover{color:#fff}.notification-title.svelte-12566qp{margin:0 0 12px;font-size:20px;font-weight:600;color:#fff}.notification-message.svelte-12566qp{margin:0 0 20px;font-size:14px;line-height:1.5;color:#ccc}.notification-actions.svelte-12566qp{display:flex;gap:8px;justify-content:flex-end}.notification-button.svelte-12566qp{padding:8px 16px;border:none;border-radius:4px;font-size:14px;font-weight:500;cursor:pointer;transition:background-color .15s ease}.notification-button.svelte-12566qp:not(.secondary){background-color:#4a90e2;color:#fff}.notification-button.svelte-12566qp:not(.secondary):hover{background-color:#357abd}.notification-button.secondary.svelte-12566qp{background-color:#444;color:#fff}.notification-button.secondary.svelte-12566qp:hover{background-color:#555}.notification-button.svelte-12566qp:focus{outline:2px solid #4a90e2;outline-offset:2px}.zoom-indicator.svelte-lpl7xl{position:fixed;top:20px;right:20px;background:#000c;color:#fff;padding:8px 12px;border-radius:6px;font-family:monospace;font-size:12px;z-index:1000;pointer-events:none;animation:svelte-lpl7xl-fadeIn .3s ease}@keyframes svelte-lpl7xl-fadeIn{0%{opacity:0}to{opacity:1}}
